-- Adminer 4.3.1 MySQL dump

SET NAMES utf8;
SET time_zone = '+00:00';
SET foreign_key_checks = 0;
SET sql_mode = 'NO_AUTO_VALUE_ON_ZERO';

SET NAMES utf8mb4;

DROP TABLE IF EXISTS `blocks`;
CREATE TABLE `blocks` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` text COLLATE utf8mb4_unicode_ci,
  `url` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `position` int(11) NOT NULL DEFAULT '0',
  `redirect` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `active` int(11) NOT NULL DEFAULT '1',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `blocks_url_unique` (`url`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `blocks` (`id`, `title`, `description`, `url`, `position`, `redirect`, `active`, `created_at`, `updated_at`) VALUES
(1,	'Текст в подвале',	'<p>Помните, что проект находится в&nbsp;стадии активной разработки и&nbsp;распространяется &laquo;как есть&raquo;. Работоспособность компонентов, их&nbsp;вид и&nbsp;состав может часто меняться. Никакой ответственности за&nbsp;работоспособность системы разработчик не&nbsp;несет.</p>\r\n<p><a href=\"mailto:fanamurov@ya.ru\">Связаться с&nbsp;разработчиком.</a></p>',	'tekst_v_podvale',	0,	'',	1,	'2017-10-24 15:43:14',	'2017-10-24 15:43:55');

DROP TABLE IF EXISTS `category`;
CREATE TABLE `category` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` char(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `short` text COLLATE utf8mb4_unicode_ci,
  `description` text COLLATE utf8mb4_unicode_ci,
  `description_link` char(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `component` char(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `parent` int(11) DEFAULT NULL,
  `level` int(11) NOT NULL DEFAULT '1',
  `url` char(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `sitemap` int(11) NOT NULL DEFAULT '1',
  `rss` int(11) NOT NULL DEFAULT '0',
  `position` int(11) NOT NULL DEFAULT '1',
  `active` int(11) NOT NULL DEFAULT '1',
  `user_id` int(10) unsigned DEFAULT NULL,
  `attached` int(11) NOT NULL DEFAULT '0',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `category_url_unique` (`url`),
  KEY `category_user_id_foreign` (`user_id`),
  CONSTRAINT `category_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `category` (`id`, `title`, `short`, `description`, `description_link`, `component`, `parent`, `level`, `url`, `sitemap`, `rss`, `position`, `active`, `user_id`, `attached`, `created_at`, `updated_at`) VALUES
(1,	'Техническая документация',	'<p>Документация для разработчиков. Объяснение логики и&nbsp;работы приложения &laquo;под капотом&raquo;.</p>',	NULL,	NULL,	'feed',	NULL,	1,	'tekhnicheskaya-dokumentatsiya',	1,	0,	0,	1,	1,	0,	'2017-10-23 19:40:34',	'2017-10-24 15:36:17'),
(2,	'Пользовательская документация',	NULL,	NULL,	NULL,	'feed',	NULL,	1,	'polzovatelskaya-dokumentatsiya',	1,	0,	0,	1,	1,	0,	'2017-10-23 19:40:44',	'2017-10-23 19:40:44'),
(3,	'Базовые знания',	NULL,	NULL,	NULL,	'feed',	1,	2,	'bazovye-znaniya',	1,	0,	100,	1,	1,	0,	'2017-10-23 19:46:39',	'2017-10-23 19:46:39'),
(4,	'Компоненты',	'<p>Базовым понятием в LarrockCMS являются компоненты расширяющие функции ядра или друг друга.</p>',	NULL,	NULL,	'feed',	1,	2,	'komponenty',	1,	0,	90,	1,	1,	0,	'2017-10-23 20:03:35',	'2017-10-24 15:31:41'),
(5,	'LarrockPages (core)',	'<p>Компонент для создания на сайте статичных страниц имеющих заголовок и текст. Поставляется вместе с ядром (larrock-core)</p>',	'<p>Подключенные плагины в админке: загрузка фото, загрузка файлов, SEO</p>\r\n<p>Подключенные плагины на фронте: вывод фотографий в формате галерей, вывод списка загруженных файлов, SEO-данные</p>\r\n<p>Ссылка на репозиторий:&nbsp;<a href=\"https://github.com/Fanamurov/larrock-pages\">https://github.com/Fanamurov/larrock-pages</a></p>\r\n<p><strong>Внимание: компонент поставляется вместе с ядром (larrock-core), дополнительная установка не требуется.</strong></p>\r\n<h4><a id=\"user-content-depends\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockPages#depends\" aria-hidden=\"true\"></a>Depends</h4>\r\n<ul>\r\n<li>fanamurov/larrock-core</li>\r\n</ul>\r\n<h2><a id=\"user-content-install\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockPages#install\" aria-hidden=\"true\"></a>INSTALL</h2>\r\n<ol>\r\n<li>Install larrock-core</li>\r\n<li>Install larrock-pages</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>composer require fanamurov/larrock-pages</pre>\r\n</div>\r\n<ol start=\"3\">\r\n<li>Publish views, migrations etc.</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan vendor:publish</pre>\r\n</div>\r\n<ol start=\"4\">\r\n<li>Run migrations</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan migrate</pre>\r\n</div>\r\n<h2><a id=\"user-content-start\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockPages#start\" aria-hidden=\"true\"></a>START</h2>\r\n<p><a href=\"http://yousite/admin/pages\">http://yousite/admin/pages</a></p>',	NULL,	'feed',	4,	3,	'larrockpages-core',	1,	0,	80,	1,	1,	0,	'2017-10-23 20:04:13',	'2017-10-23 20:56:29'),
(6,	'LarrockMenu (core)',	'<p>Компонент для реализации модуля меню навигации по сайту.</p>',	'<p><strong>Внимание: компонент поставляется вместе с ядром (larrock-core), дополнительная установка не требуется.</strong></p>\r\n<h4><a id=\"user-content-depends\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockMenu#depends\" aria-hidden=\"true\"></a>Depends</h4>\r\n<ul>\r\n<li>fanamurov/larrock-core</li>\r\n</ul>\r\n<h2><a id=\"user-content-install\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockMenu#install\" aria-hidden=\"true\"></a>INSTALL</h2>\r\n<ol>\r\n<li>Install larrock-core</li>\r\n<li>Install larrock-menu</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>composer require fanamurov/larrock-menu</pre>\r\n</div>\r\n<ol start=\"3\">\r\n<li>Publish views, migrations etc.</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan vendor:publish</pre>\r\n</div>\r\n<ol start=\"4\">\r\n<li>Run migrations</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan migrate</pre>\r\n</div>\r\n<h2><a id=\"user-content-start\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockMenu#start\" aria-hidden=\"true\"></a>START</h2>\r\n<p><a href=\"http://yousite/admin/menu\">http://yousite/admin/menu</a></p>',	NULL,	'feed',	4,	3,	'larrockmenu-core',	1,	0,	70,	1,	1,	0,	'2017-10-23 20:51:03',	'2017-10-23 20:52:42'),
(7,	'LarrockUsers (core)',	'<p>Пользователи и система ролей/прав доступа.</p>',	NULL,	NULL,	'feed',	4,	3,	'larrockusers-core',	1,	0,	70,	1,	1,	0,	'2017-10-23 21:01:32',	'2017-10-23 21:47:07'),
(8,	'LarrockBlocks (core)',	'<p>Компонент создания блоков информации с легкой вставкой в шаблон сайта.</p>',	'<p><strong>Внимание: компонент поставляется вместе с ядром (larrock-core), дополнительная установка не требуется.</strong></p>\r\n<h4><a id=\"user-content-depends\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockBlocks#depends\" aria-hidden=\"true\"></a>Depends</h4>\r\n<ul>\r\n<li>fanamurov/larrock-core</li>\r\n</ul>\r\n<h2><a id=\"user-content-install\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockBlocks#install\" aria-hidden=\"true\"></a>INSTALL</h2>\r\n<ol>\r\n<li>Install larrock-core</li>\r\n<li>Install larrock-blocks</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>composer require fanamurov/larrock-blocks</pre>\r\n</div>\r\n<ol start=\"3\">\r\n<li>Publish views, migrations etc.</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan vendor:publish</pre>\r\n</div>\r\n<ol start=\"4\">\r\n<li>Run migrations</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan migrate</pre>\r\n</div>\r\n<h2><a id=\"user-content-start\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockBlocks#start\" aria-hidden=\"true\"></a>START</h2>\r\n<p><a href=\"http://yousite/admin/blocks\">http://yousite/admin/blocks</a></p>',	NULL,	'feed',	4,	3,	'larrockblocks-core',	1,	0,	80,	1,	1,	0,	'2017-10-23 21:04:09',	'2017-10-23 21:48:00'),
(9,	'LarrockContact (core)',	'<p>Компонент создания форм обратной связи.</p>',	'<p><strong>Внимание: компонент поставляется вместе с ядром (larrock-core), дополнительная установка не требуется.</strong></p>\r\n<h4><a id=\"user-content-depends\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockContact#depends\" aria-hidden=\"true\"></a>Depends</h4>\r\n<ul>\r\n<li>fanamurov/larrock-core</li>\r\n<li>albertcht/invisible-recaptcha</li>\r\n</ul>\r\n<h2><a id=\"user-content-install\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockContact#install\" aria-hidden=\"true\"></a>INSTALL</h2>\r\n<ol>\r\n<li>Install larrock-core</li>\r\n<li>Install larrock-contact</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>composer require fanamurov/larrock-contact</pre>\r\n</div>\r\n<ol start=\"3\">\r\n<li>Publish views, migrations etc.</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan vendor:publish</pre>\r\n</div>\r\n<h2><a id=\"user-content-Настройка-invisible-recaptcha\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockContact#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-invisible-recaptcha\" aria-hidden=\"true\"></a>Настройка invisible-recaptcha</h2>\r\n<p><a href=\"https://github.com/albertcht/invisible-recaptcha\">See documentation</a></p>',	NULL,	'feed',	4,	3,	'larrockcontact-core',	1,	0,	70,	1,	1,	0,	'2017-10-23 21:11:58',	'2017-10-23 21:48:03'),
(10,	'LarrockAdminSeo (core)',	'<p>Компонент управления и вывода SEO-данных материалов компонентов.</p>',	NULL,	NULL,	'feed',	4,	3,	'larrockadminseo-core',	1,	0,	90,	1,	1,	0,	'2017-10-23 21:15:05',	'2017-10-30 17:15:35'),
(11,	'LarrockSearch (core)',	'<p>Компонент поиска по материалам компонентов внутри фронта и административной части сайта.</p>',	NULL,	NULL,	'feed',	4,	3,	'larrocksearch-core',	1,	0,	90,	1,	1,	0,	'2017-10-23 21:16:46',	'2017-10-30 17:21:04'),
(12,	'LarrockFeed',	'<p>Компонент материалов входящих в какую-либо структуру разделов.</p>',	'<h4>Depends</h4>\r\n<ul>\r\n<li>fanamurov/larrock-core</li>\r\n<li>fanamurov/larrock-category</li>\r\n</ul>\r\n<h2><a id=\"user-content-install\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockFeed#install\" aria-hidden=\"true\"></a>INSTALL</h2>\r\n<ol>\r\n<li>Install larrock-core</li>\r\n<li>Install larrock-feed</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>composer require fanamurov/larrock-feed</pre>\r\n</div>\r\n<ol start=\"3\">\r\n<li>Publish views, migrations etc.</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan vendor:publish</pre>\r\n</div>\r\n<ol start=\"4\">\r\n<li>Run migrations</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan migrate</pre>\r\n</div>\r\n<h2><a id=\"user-content-start\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockFeed#start\" aria-hidden=\"true\"></a>START</h2>\r\n<p><a href=\"http://yousite/admin/feed\">http://yousite/admin/feed</a></p>',	NULL,	'feed',	4,	3,	'larrockfeed',	1,	0,	60,	1,	1,	0,	'2017-10-23 21:18:24',	'2017-10-23 21:49:15'),
(13,	'LarrockCategory',	'<p>Компонент управления разделами материалов на сайте.</p>',	'<h4>Depends</h4>\r\n<ul>\r\n<li>fanamurov/larrock-core</li>\r\n</ul>\r\n<h2><a id=\"user-content-install\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockCategory#install\" aria-hidden=\"true\"></a>INSTALL</h2>\r\n<ol>\r\n<li>\r\n<p>Install larrock-category</p>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>composer require fanamurov/larrock-category</pre>\r\n</div>\r\n</li>\r\n<li>\r\n<div class=\"highlight highlight-text-html-php\">Publish views, migrations etc.</div>\r\n</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan vendor:publish</pre>\r\n</div>\r\n<ol start=\"3\">\r\n<li>Run migrations</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan migrate</pre>\r\n</div>\r\n<h2><a id=\"user-content-start\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockCategory#start\" aria-hidden=\"true\"></a>START</h2>\r\n<p><a href=\"http://yousite/admin/category\">http://yousite/admin/category</a></p>',	NULL,	'feed',	4,	3,	'larrockcategory',	1,	0,	60,	1,	1,	0,	'2017-10-23 21:26:04',	'2017-10-23 21:49:37'),
(14,	'LarrockCatalog',	'<p>Компонент каталога товаров.</p>',	'<h4>Depends</h4>\r\n<ul>\r\n<li>fanamurov/larrock-core</li>\r\n<li>fanamurov/larrock-category</li>\r\n</ul>\r\n<h2><a id=\"user-content-install\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockCatalog#install\" aria-hidden=\"true\"></a>INSTALL</h2>\r\n<ol>\r\n<li>Install larrock-catalog</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>composer require fanamurov/larrock-catalog</pre>\r\n</div>\r\n<ol start=\"2\">\r\n<li>Publish views, migrations etc.</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan vendor:publish</pre>\r\n</div>\r\n<ol start=\"3\">\r\n<li>Run migrations</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan migrate</pre>\r\n</div>\r\n<h2><a id=\"user-content-start\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockCatalog#start\" aria-hidden=\"true\"></a>START</h2>\r\n<p><a href=\"http://yousite/admin/catalog\">http://yousite/admin/catalog</a></p>\r\n<h2><a id=\"user-content-config\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockCatalog#config\" aria-hidden=\"true\"></a>CONFIG</h2>\r\n<p>Create or change /config/<strong>larrock.php</strong></p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">	<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>catalog<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">	    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>templates<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">	        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>categoriesTable<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>larrock::front.catalog.items-table<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">	        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>categoriesBlocks<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>larrock::front.catalog.items-4-3<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">	    ],</span>\r\n	\r\n<span class=\"pl-s1\">	    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>categoriesView<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>blocks<span class=\"pl-pds\">\'</span></span> <span class=\"pl-c\">//Вид каталога по-умолчанию (blocks или table) </span></span>\r\n<span class=\"pl-s1\">		<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>DefaultItemsOnPage<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">36</span>, <span class=\"pl-c\">//Кол-во товаров на странице раздела по-умолчанию</span></span>\r\n	\r\n<span class=\"pl-s1\">		<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>ShowItemPage<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">true</span>, <span class=\"pl-c\">//Если true - показывать ссылки на страницу товара</span></span>\r\n<span class=\"pl-s1\">		<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>DescriptionCatalogItemLink<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">TRUE</span>, <span class=\"pl-c\">//Если true - показывать прилинкованные описания для страницы товара</span></span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>DescriptionCatalogCategoryLink<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">TRUE</span>, <span class=\"pl-c\">//Если true - показывать прилинкованные описания для страницы раздела каталога</span></span>\r\n	\r\n<span class=\"pl-s1\">	    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>modules<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">	        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>sortCost<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">TRUE</span>, <span class=\"pl-c\">//Показывать модуль сортировки</span></span>\r\n<span class=\"pl-s1\">	        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>lilu<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">TRUE</span>, <span class=\"pl-c\">//Показывать модуль фильтров товаров</span></span>\r\n<span class=\"pl-s1\">	        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>vid<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">TRUE</span>, <span class=\"pl-c\">//Показывать модуль выбора шаблона</span></span>\r\n<span class=\"pl-s1\">	        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>itemsOnPage<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">TRUE</span>, <span class=\"pl-c\">//Показывать модуль кол-ва товаров на страницу</span></span>\r\n<span class=\"pl-s1\">	    ]</span>\r\n<span class=\"pl-s1\">	]</span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>',	NULL,	'feed',	4,	3,	'larrockcatalog',	1,	0,	50,	1,	1,	0,	'2017-10-23 21:28:21',	'2017-10-23 21:49:47'),
(15,	'LarrockCart',	'<p>Компонент корзины покупок для расширения функционала LarrockCatalog по интернет-магазина.</p>',	'<h4>Depends</h4>\r\n<ul>\r\n<li>fanamurov/larrock-core</li>\r\n<li>fanamurov/larrock-catalog</li>\r\n<li>fanamurov/larrock-category</li>\r\n<li>fanamurov/larrock-users</li>\r\n<li>gloudemans/shoppingcart</li>\r\n<li>artem328/laravel-yandex-kassa</li>\r\n</ul>\r\n<h2><a id=\"user-content-install\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockCart#install\" aria-hidden=\"true\"></a>INSTALL</h2>\r\n<ol>\r\n<li>Install larrock-core</li>\r\n<li>Install larrock-cart</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>composer require fanamurov/larrock-cart</pre>\r\n</div>\r\n<ol start=\"3\">\r\n<li>Publish views, migrations etc.</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan vendor:publish</pre>\r\n</div>\r\n<ol start=\"4\">\r\n<li>Run migrations</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan migrate</pre>\r\n</div>\r\n<h2><a id=\"user-content-start\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockCart#start\" aria-hidden=\"true\"></a>START</h2>\r\n<p><a href=\"http://yousite/admin/cart\">http://yousite/admin/cart</a></p>',	NULL,	'feed',	4,	3,	'larrockcart',	1,	0,	50,	1,	1,	0,	'2017-10-23 21:36:11',	'2017-10-23 21:50:46'),
(16,	'LarrockDiscount',	'<p>Компонент скидок к товарам, разделам и т.д. для расширения функционала LarrockCatalog.</p>',	'<h4>Depends</h4>\r\n<ul>\r\n<li>fanamurov/larrock-core</li>\r\n<li>fanamurov/larrock-catalog</li>\r\n<li>fanamurov/larrock-category</li>\r\n</ul>\r\n<h2><a id=\"user-content-install\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockDiscount#install\" aria-hidden=\"true\"></a>INSTALL</h2>\r\n<ol>\r\n<li>Install larrock-core</li>\r\n<li>Install larrock-discount</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>composer require fanamurov/larrock-discount</pre>\r\n</div>\r\n<ol start=\"3\">\r\n<li>Publish views, migrations etc.</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan vendor:publish</pre>\r\n</div>\r\n<ol start=\"4\">\r\n<li>Run migrations</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan migrate</pre>\r\n</div>\r\n<h2><a id=\"user-content-start\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockDiscount#start\" aria-hidden=\"true\"></a>START</h2>\r\n<p><a href=\"http://yousite/admin/discount\">http://yousite/admin/discount</a></p>',	NULL,	'feed',	4,	3,	'larrockdiscount',	1,	0,	50,	1,	1,	0,	'2017-10-23 21:37:56',	'2017-10-23 21:51:19'),
(17,	'LarrockWizard',	'<p>Импорт каталога в виде прайса .xlsx на сайт в компонент LarrockCatalog</p>',	'<h4>Depends:</h4>\r\n<ul>\r\n<li>fanamurov/larrock-core</li>\r\n<li>fanamurov/larrock-catalog</li>\r\n<li>fanamurov/larrock-category</li>\r\n<li>maatwebsite/excel</li>\r\n<li>laracasts/generators</li>\r\n</ul>\r\n<h2><a id=\"user-content-install\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockWizard#install\" aria-hidden=\"true\"></a>INSTALL</h2>\r\n<ol>\r\n<li>Install larrock-wizard</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>   composer require fanamurov/larrock-wizard</pre>\r\n</div>\r\n<ol start=\"2\">\r\n<li>\r\n<p>Install laracasts/generators fork (laravel 5.5 support). Update main composer.js</p>\r\n<pre><code>\"repositories\": [\r\n    {\r\n        \"type\": \"git\",\r\n        \"url\": \"https://github.com/Fanamurov/L5GeneratorsLarrock.git\"\r\n    }\r\n],\r\n\"require\": {\r\n    \"laracasts/generators\": \"dev-master\"\r\n},\r\n</code></pre>\r\n</li>\r\n<li>\r\n<p>Add service providers (config/app.php)</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-c\">//http://www.maatwebsite.nl/laravel-excel/docs/import</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c1\">Maatwebsite\\Excel\\</span><span class=\"pl-c1\">ExcelServiceProvider</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span>,</span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\">//https://github.com/laracasts/Laravel-5-Generators-Extended</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c1\">\\Laracasts\\Generators\\</span><span class=\"pl-c1\">GeneratorsServiceProvider</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span>,</span></pre>\r\n</div>\r\n<p>Add alias servise providers</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Excel<span class=\"pl-pds\">\'</span></span>     <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">Maatwebsite\\Excel\\Facades\\</span><span class=\"pl-c1\">Excel</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span>,</span></pre>\r\n</div>\r\n</li>\r\n<li>\r\n<p>Publish vendor files</p>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan vendor:publish --provider=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Maatwebsite\\Excel\\ExcelServiceProvider<span class=\"pl-pds\">\"</span></span></pre>\r\n</div>\r\n</li>\r\n</ol>\r\n<h2><a id=\"user-content-start\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockWizard#start\" aria-hidden=\"true\"></a>START</h2>\r\n<p>Load .xlsx file, сonfigure import and import&nbsp;<a href=\"http://yousite/admin/wizard\">http://yousite/admin/wizard</a></p>\r\n<h2><a id=\"user-content-artisan-commands\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockWizard#artisan-commands\" aria-hidden=\"true\"></a>ARTISAN COMMANDS</h2>\r\n<p>Start import (clear catalog and import loaded .xlsx)</p>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan wizard:import</pre>\r\n</div>\r\n<p>Clear catalog</p>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan wizard:clear</pre>\r\n</div>\r\n<p>Start import selected sheet</p>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan wizard:sheet --sheet={number sheet}</pre>\r\n</div>\r\n<h2><a id=\"user-content-notes\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockWizard#notes\" aria-hidden=\"true\"></a>NOTES</h2>\r\n<ul>\r\n<li>The file for import must be only one</li>\r\n<li>The file must be in the directory \'/resources/wizard\'</li>\r\n</ul>',	NULL,	'feed',	4,	3,	'larrockwizard',	1,	0,	50,	1,	1,	0,	'2017-10-23 21:40:02',	'2017-10-23 21:41:48'),
(18,	'LarrockReviews',	'<p>Компонент отзывов/комментариев к материалам.</p>',	'<h4>Depends</h4>\r\n<ul>\r\n<li>fanamurov/larrock-core</li>\r\n<li>fanamurov/larrock-users</li>\r\n</ul>\r\n<h2><a id=\"user-content-install\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockReviews#install\" aria-hidden=\"true\"></a>INSTALL</h2>\r\n<ol>\r\n<li>Install larrock-core</li>\r\n<li>Install larrock-reviews</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>composer require fanamurov/larrock-reviews</pre>\r\n</div>\r\n<ol start=\"3\">\r\n<li>Publish views, migrations etc.</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan vendor:publish</pre>\r\n</div>\r\n<ol start=\"4\">\r\n<li>Run migrations</li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan migrate</pre>\r\n</div>\r\n<h2>START&nbsp;</h2>\r\n<p><a href=\"http://yousite/admin/reviews\">http://yousite/admin/reviews</a></p>',	NULL,	'feed',	4,	3,	'larrockreviews',	1,	0,	0,	1,	1,	0,	'2017-10-23 21:43:34',	'2017-10-23 21:51:45'),
(19,	'LarrockSmartbanners',	'<p>Компонент используется только внутри студии &laquo;Март&raquo; в&nbsp;Хабаровске. Выполняет роль клиента баннерообменной сети.</p>',	'<h2>Установка компонента LarrockSmartbanners</h2>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>composer require fanamurov/larrock-smartbanners</pre>\r\n</div>\r\n<h2><a id=\"user-content-Показ-баннеров\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockSmartbanners#%D0%9F%D0%BE%D0%BA%D0%B0%D0%B7-%D0%B1%D0%B0%D0%BD%D0%BD%D0%B5%D1%80%D0%BE%D0%B2\" aria-hidden=\"true\"></a>Показ баннеров</h2>\r\n<ol>\r\n<li>\r\n<p>За вывод баннеров отвечает&nbsp;<strong>middleware Smartbanners</strong>. Подключите его в&nbsp;<strong>app/Http/Kernel.php</strong>&nbsp;в секцию $middlewareGroups - web</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">use</span> <span class=\"pl-c1\">Larrock\\ComponentSmartbanners\\Middleware\\Smartbaners</span>;</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">class</span> <span class=\"pl-en\">Kernel</span> <span class=\"pl-k\">extends</span> <span class=\"pl-e\">HttpKernel</span></span>\r\n<span class=\"pl-s1\">{</span>\r\n<span class=\"pl-s1\"> <span class=\"pl-k\">protected</span> <span class=\"pl-smi\">$middlewareGroups</span> <span class=\"pl-k\">=</span> [</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>web<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-k\">...</span></span>\r\n<span class=\"pl-s1\">            <span class=\"pl-c1\">Smartbanners</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span></span>\r\n<span class=\"pl-s1\">        ],</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-k\">...</span></span>\r\n<span class=\"pl-s1\">    ];</span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n</li>\r\n<li>\r\n<p>В&nbsp;<strong>.env</strong>-файле вашего сайта определите значения:</p>\r\n<pre><code>SMARTBANNERS=(true/false) //активировать ли показы\r\nSMARTBANNERS_BANNERS= //Сколько баннеров показывать\r\nSMARTBANNERS_PARTNERS= //Сколько баннеров партнеров показывать\r\nSMARTBANNERS_HOST= //Хост сайта показывающего баннеры\r\nSMARTBANNERS_SERVER= //Хост сайта сервера баннерообменки\r\n</code></pre>\r\n<p>Пример:</p>\r\n<pre><code>SMARTBANNERS=true\r\nSMARTBANNERS_BANNERS=2\r\nSMARTBANNERS_PARTNERS=1\r\nSMARTBANNERS_HOST=martds_ru\r\nSMARTBANNERS_SERVER=http://martds.ru\r\n</code></pre>\r\n</li>\r\n<li>\r\n<p>Вызовите в шаблоне сайта:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">@</span><span class=\"pl-k\">if</span>(env(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>SMARTBANNERS<span class=\"pl-pds\">\'</span></span>) <span class=\"pl-k\">===</span> <span class=\"pl-c1\">true</span>)</span>\r\n<span class=\"pl-s1\">    {<span class=\"pl-k\">!!</span> <span class=\"pl-smi\">$smartbanners</span> <span class=\"pl-k\">!!</span>}</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span><span class=\"pl-k\">endif</span></span></pre>\r\n</div>\r\n</li>\r\n</ol>\r\n<h2><a id=\"user-content-Пример-принимаемых-данных-от-сервера-баннерообменки-json\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockSmartbanners#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BF%D1%80%D0%B8%D0%BD%D0%B8%D0%BC%D0%B0%D0%B5%D0%BC%D1%8B%D1%85-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85-%D0%BE%D1%82-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0-%D0%B1%D0%B0%D0%BD%D0%BD%D0%B5%D1%80%D0%BE%D0%BE%D0%B1%D0%BC%D0%B5%D0%BD%D0%BA%D0%B8-json\" aria-hidden=\"true\"></a>Пример принимаемых данных от сервера баннерообменки (json):</h2>\r\n<pre><code>array (\r\n  0 =&gt; \r\n  array (\r\n    \'title\' =&gt; \'Отличные цены [link_start]Входные двери продажа со склада[link_end]\',\r\n    \'id\' =&gt; \'2\',\r\n    \'banner_url\' =&gt; \'http://site.ru\',\r\n    \'image\' =&gt; \'/public/images/sbanners/big/sbanners.png\',\r\n  ),\r\n  1 =&gt; \r\n  array (\r\n    \'title\' =&gt; \'[link_start]Компания \"Рога и копыта\"[link_end]\',\r\n    \'id\' =&gt; \'16\',\r\n    \'banner_url\' =&gt; \'http://site2.ru\',\r\n    \'image\' =&gt; \'/public/images/sbanners/big/sbanners_2.png\',\r\n  ),\r\n)</code></pre>',	NULL,	'feed',	4,	3,	'larrocksmartbanners',	1,	0,	-10,	1,	1,	0,	'2017-10-23 21:45:49',	'2017-10-23 21:46:16'),
(20,	'Как работают компоненты',	NULL,	NULL,	NULL,	'feed',	1,	2,	'kak-rabotayut-komponenty',	1,	0,	80,	1,	1,	0,	'2017-10-23 21:54:25',	'2017-10-23 21:54:25'),
(21,	'FormBuilder — конструктор полей',	'<p>Хелпер управления данными компонентов в административной части. Автоматическое построение форм.</p>',	NULL,	NULL,	'feed',	1,	2,	'formbuilder-konstruktor-poley',	1,	0,	70,	1,	1,	0,	'2017-10-23 22:13:08',	'2017-10-23 22:14:28'),
(22,	'Пресеты',	'<p>Библиотеки, методы и код расширяющие функционал компонентов в шаблонах.</p>',	NULL,	NULL,	'feed',	1,	2,	'presety',	1,	0,	60,	1,	1,	0,	'2017-10-23 22:18:43',	'2017-10-24 15:35:26'),
(23,	'LarrockCore',	'<p>Базовый компонент, отвечающий за построение логики компонентов, плагинов, модулей и административной части.</p>',	NULL,	NULL,	'feed',	4,	3,	'larrockcore',	1,	0,	100,	1,	1,	0,	'2017-10-24 15:40:06',	'2017-10-24 15:40:21');

DROP TABLE IF EXISTS `category_link`;
CREATE TABLE `category_link` (
  `category_id` int(10) unsigned NOT NULL,
  `category_id_link` int(10) unsigned NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  KEY `category_link_category_id_foreign` (`category_id`),
  KEY `category_link_category_id_link_foreign` (`category_id_link`),
  CONSTRAINT `category_link_category_id_foreign` FOREIGN KEY (`category_id`) REFERENCES `category` (`id`) ON DELETE CASCADE,
  CONSTRAINT `category_link_category_id_link_foreign` FOREIGN KEY (`category_id_link`) REFERENCES `category` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `config`;
CREATE TABLE `config` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` char(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `value` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` char(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `feed`;
CREATE TABLE `feed` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `category` int(10) unsigned NOT NULL,
  `short` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `url` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `date` datetime NOT NULL,
  `position` int(11) NOT NULL DEFAULT '0',
  `active` int(11) NOT NULL DEFAULT '1',
  `user_id` int(10) unsigned NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `feed_url_unique` (`url`),
  KEY `feed_category_foreign` (`category`),
  KEY `feed_user_id_foreign` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `feed` (`id`, `title`, `category`, `short`, `description`, `url`, `date`, `position`, `active`, `user_id`, `created_at`, `updated_at`) VALUES
(1,	'Установка LarrockCMS',	3,	'',	'<p><a href=\"https://github.com/Fanamurov/larrock-core\">LarrockCMS</a> - это CMS основанная на php-фреймворке Laravel поставляемая в формате composer-пакетов.</p>\r\n<p><a href=\"https://packagist.org/packages/fanamurov/larrock-core\"><img src=\"https://camo.githubusercontent.com/4995869bf897e3f0ecbada3a719f3ce06217c3a5/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d636f72652f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-core/v/stable\" /></a> <a href=\"https://packagist.org/packages/fanamurov/larrock-core\"><img src=\"https://camo.githubusercontent.com/c5283dee214c79ef6003bda22e6a72d4994b38d0/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d636f72652f646f776e6c6f616473\" alt=\"Total Downloads\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-core/downloads\" /></a> <a href=\"https://packagist.org/packages/fanamurov/larrock-core\"><img src=\"https://camo.githubusercontent.com/a0c96d396406788440ec6194f9b11f179398df24/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d636f72652f6c6963656e7365\" alt=\"License\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-core/license\" /></a> <a href=\"https://www.codacy.com/app/Fanamurov/larrock-core?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=Fanamurov/larrock-core&amp;utm_campaign=Badge_Grade\"><img src=\"https://camo.githubusercontent.com/e4bb7139f294082ede058b2ccaed640c2c7350c4/68747470733a2f2f6170692e636f646163792e636f6d2f70726f6a6563742f62616467652f47726164652f3161306662313966326530323436303761316434303236306338626161356537\" alt=\"Codacy Badge\" data-canonical-src=\"https://api.codacy.com/project/badge/Grade/1a0fb19f2e024607a1d40260c8baa5e7\" /></a></p>\r\n<p>Распространяется под лицензией LGPL. При использовании CMS вы обязаны указать ее название в своем проекте в виде копирайта в админ-панели.</p>\r\n<p>В основе проекта ядро CMS (LarrockCore), устанавливаемое в дополнение к laravel версии &gt;=5.5 и пакеты компонентов (дополнений к LarrockCore).</p>\r\n<p><strong>Внимание! LarrockCMS версии &gt;=0.2.x требует Mysql версии не ниже 5.7! Для работы с более старыми версиями используйте ветку 0.1.x.</strong></p>\r\n<hr />\r\n<h3><a id=\"user-content-Компоненты-поставляемые-вместе-с-главным-пакетом-larrock-core\" class=\"anchor\" href=\"#%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B-%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D1%8F%D0%B5%D0%BC%D1%8B%D0%B5-%D0%B2%D0%BC%D0%B5%D1%81%D1%82%D0%B5-%D1%81-%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D1%8B%D0%BC-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%BC-larrock-core\" aria-hidden=\"true\"></a>Компоненты поставляемые вместе с главным пакетом larrock-core:</h3>\r\n<ul>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-menu\"><img src=\"https://camo.githubusercontent.com/beb24057a13811a831beb952ee4f8ca5bdac88ac/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d6d656e752f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-menu/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-menu\">fanamurov/larrock-menu</a> - управление меню сайта</li>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-users\"><img src=\"https://camo.githubusercontent.com/689c7c9efc86d9c5ebeaaac048a5b98cb7177eb8/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d75736572732f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-users/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-users\">fanamurov/larrock-users</a> - пользователи, права и роли</li>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-pages\"><img src=\"https://camo.githubusercontent.com/c5f447d5cdaaa0fdf72e6b2f8e585676718c4f5a/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d70616765732f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-pages/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-pages\">fanamurov/larrock-pages</a> - страницы</li>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-blocks\"><img src=\"https://camo.githubusercontent.com/f3726e2f069c4c4a4accae01740cb6b85aa6d359/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d626c6f636b732f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-blocks/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-blocks\">fanamurov/larrock-blocks</a> - блоки для вывода в шаблоне</li>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-contact\"><img src=\"https://camo.githubusercontent.com/65564a4f8a0403dd6f41661977f92e796289142c/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d636f6e746163742f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-contact/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-contact\">fanamurov/larrock-contact</a> - вывод, обработка, отправка форм</li>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-admin-seo\"><img src=\"https://camo.githubusercontent.com/dcf49c5656e769a1bcdc08ff233c5aa9defc8b14/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d61646d696e2d73656f2f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-admin-seo/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-admin-seo\">fanamurov/larrock-admin-seo</a> - управление seo-данными компонентов</li>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-core\"><img src=\"https://camo.githubusercontent.com/b682078ef87799a2f41323e3468f2a2c0fc24f8b/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d61646d696e2d7365617263682f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-admin-search/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-admin-search\">fanamurov/larrock-admin-search</a> - поиск по материалам компонентов в админке</li>\r\n</ul>\r\n<h3><a id=\"user-content-Другие-компоненты\" class=\"anchor\" href=\"#%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B\" aria-hidden=\"true\"></a>Другие компоненты:</h3>\r\n<ul>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-catalog\"><img src=\"https://camo.githubusercontent.com/8200a4f21cd1df3ed4cef869bbf4c8a8bc7a46b9/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d636174616c6f672f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-catalog/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-catalog\">fanamurov/larrock-catalog</a> - каталог товаров</li>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-cart\"><img src=\"https://camo.githubusercontent.com/f144ce813012bb245b005be44049c999faf84376/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d636172742f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-cart/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-cart\">fanamurov/larrock-cart</a> - корзина покупок, сохранение заказов, оплаты</li>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-discount\"><img src=\"https://camo.githubusercontent.com/689e453813c8af8211401a14fdf0582316953f56/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d646973636f756e742f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-discount/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-discount\">fanamurov/larrock-discount</a> - скидочная система к каталогу</li>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-feed\"><img src=\"https://camo.githubusercontent.com/4d9b669bd449762126817948586561e9015446a7/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d666565642f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-feed/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-feed\">fanamurov/larrock-feed</a> - материалы в разделах</li>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-reviews\"><img src=\"https://camo.githubusercontent.com/58c46484d70a0d99a2153c317690cf00d81a4cc5/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d726576696577732f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-reviews/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-reviews\">fanamurov/larrock-reviews</a> - отзывы, комментарии</li>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-wizard\"><img src=\"https://camo.githubusercontent.com/9f661e0acf5197b3ea406f0ed1162508c3dbfa59/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d77697a6172642f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-wizard/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-wizard\">fanamurov/larrock-wizard</a> - импорт товаров в каталог через .xlsx-прайс</li>\r\n<li><a href=\"https://packagist.org/packages/fanamurov/larrock-smartbanners\"><img src=\"https://camo.githubusercontent.com/77c62693b64b11cd35551cdcc5e0f3e17f14a49f/68747470733a2f2f706f7365722e707567782e6f72672f66616e616d75726f762f6c6172726f636b2d736d61727462616e6e6572732f762f737461626c65\" alt=\"Latest Stable Version\" data-canonical-src=\"https://poser.pugx.org/fanamurov/larrock-smartbanners/v/stable\" /></a> <a href=\"https://github.com/Fanamurov/larrock-smartbanners\">fanamurov/larrock-smartbanners</a> - клиент баннерообменной сети</li>\r\n</ul>\r\n<hr />\r\n<h3><a id=\"user-content-Зависимости-компонентов\" class=\"anchor\" href=\"#%D0%97%D0%B0%D0%B2%D0%B8%D1%81%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B8-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2\" aria-hidden=\"true\"></a>Зависимости компонентов</h3>\r\n<ul>\r\n<li>\"php\": \"&gt;=7.0.0\",</li>\r\n<li>\"<a href=\"https://github.com/barryvdh/laravel-debugbar\">barryvdh/laravel-debugbar</a>\": \"~2.0\",</li>\r\n<li>\"<a href=\"https://github.com/barryvdh/laravel-ide-helper\">barryvdh/laravel-ide-helper</a>\": \"~2.1\",</li>\r\n<li>\"<a href=\"https://github.com/proengsoft/laravel-jsvalidation\">proengsoft/laravel-jsvalidation</a>\": \"^1.5\",</li>\r\n<li>\"<a href=\"https://github.com/albertcht/invisible-recaptcha\">albertcht/invisible-recaptcha</a>\": \"^1.7\",</li>\r\n<li>\"<a href=\"https://github.com/davejamesmiller/laravel-breadcrumbs\">davejamesmiller/laravel-breadcrumbs</a>\": \"^4.0\",</li>\r\n<li>\"<a href=\"https://github.com/nicolaslopezj/searchable\">nicolaslopezj/searchable</a>\": \"^1.9\",</li>\r\n<li>\"<a href=\"https://github.com/spatie/laravel-medialibrary\">spatie/laravel-medialibrary</a>\": \"^6.0.0\",</li>\r\n<li>\"<a href=\"https://github.com/kix/mdash-bundle\">kix/mdash</a>\": \"^0.5.4\"</li>\r\n</ul>\r\n<h1><a id=\"user-content-install-larrock-cms\" class=\"anchor\" href=\"#install-larrock-cms\" aria-hidden=\"true\"></a>INSTALL LARROCK CMS</h1>\r\n<ol>\r\n<li><strong>Install laravel</strong></li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ composer create-project --prefer-dist laravel/laravel=5.5.<span class=\"pl-k\">*</span> larrock</pre>\r\n</div>\r\n<ol start=\"2\">\r\n<li><strong>Install LarrockСore</strong></li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ <span class=\"pl-c1\">cd</span> larrock\r\n$ composer require fanamurov/larrock-core</pre>\r\n<ol start=\"3\">\r\n<li><strong>Rename&nbsp;<code>public</code>&nbsp;directory and add to&nbsp;<code>index.php</code>&nbsp;before&nbsp;<code>$kernel = $app-&gt;make(Illuminate\\Contracts\\Http\\Kernel::class);</code></strong></li>\r\n</ol>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-smi\">$app</span><span class=\"pl-k\">-&gt;</span>bind(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>path.public<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-k\">function</span>() {</span>\r\n<span class=\"pl-s1\">   <span class=\"pl-k\">return</span> <span class=\"pl-c1\">__DIR__</span>;</span>\r\n<span class=\"pl-s1\">});</span></pre>\r\n</div>\r\n</div>\r\n<ol start=\"4\">\r\n<li><strong>Publish views, migrations etc.</strong></li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan vendor:publish\r\n$ php artisan larrock:updateEnv\r\n$ php artisan larrock:check</pre>\r\n</div>\r\n<ol start=\"5\">\r\n<li><strong>Run migrations and add default admin user</strong></li>\r\n</ol>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan migrate\r\n$ php artisan db:seed --class=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Larrock\\ComponentUsers\\Database\\Seeds\\UsersTableSeeder<span class=\"pl-pds\">\"</span></span></pre>\r\n</div>\r\n<h2><a id=\"user-content-installation-of-other-components-larrockcms-composer-required\" class=\"anchor\" href=\"#installation-of-other-components-larrockcms-composer-required\" aria-hidden=\"true\"></a>Installation of other components LarrockCMS (composer required!)</h2>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ php artisan larrock:manager</pre>\r\n<p>or use composer</p>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>$ composer require fanamurov/larrock-<span class=\"pl-k\">*</span>name<span class=\"pl-k\">*</span></pre>\r\n</div>\r\n</div>\r\n<h3><a id=\"user-content-assets-bower-components-for-templates\" class=\"anchor\" href=\"#assets-bower-components-for-templates\" aria-hidden=\"true\"></a>ASSETS: BOWER COMPONENTS FOR TEMPLATES</h3>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre><span class=\"pl-c1\">cd</span> public_html/_assets\r\nbower install fancybox\r\nbower install jquery-validation\r\nbower install jquery.cookie\r\nbower install fileapi\r\nbower install jquery.spinner\r\nbower install microplugin\r\nbower install pickadate\r\nbower install selectize\r\nbower install sifter\r\nbower install tinymce\r\nbower install uikit</pre>\r\n</div>\r\n<h1><a id=\"user-content-start\" class=\"anchor\" href=\"#start\" aria-hidden=\"true\"></a>START</h1>\r\n<p>yoursite/<code>admin</code></p>\r\n<p>Login: <code>admin@larrock-cms.ru</code></p>\r\n<p>Password: <code>password</code></p>',	'ustanovka-larrockcms',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 19:46:43',	'2017-10-24 16:58:07'),
(3,	'Генерирование sitemap.xml карты сайта',	3,	'',	'<h2><a id=\"user-content-Список-компонентов-для-генерации-карты-сайта\" class=\"anchor\" href=\"#%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2-%D0%B4%D0%BB%D1%8F-%D0%B3%D0%B5%D0%BD%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8-%D0%BA%D0%B0%D1%80%D1%82%D1%8B-%D1%81%D0%B0%D0%B9%D1%82%D0%B0\" aria-hidden=\"true\"></a>Список компонентов для генерации карты сайта</h2>\r\n<p>Список находится в файле <strong>config/larrock-sitemap.xml</strong> и представляет собой:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$components</span> <span class=\"pl-k\">=</span> [];</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">if</span>(<span class=\"pl-c1\">file_exists</span>(base_path()<span class=\"pl-k\">.</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/vendor/fanamurov/larrock-pages<span class=\"pl-pds\">\'</span></span>)){</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-smi\">$components</span>[] <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-c1\">\\Larrock\\ComponentPages\\</span><span class=\"pl-c1\">PageComponent</span>();</span>\r\n<span class=\"pl-s1\">}</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">...</span></span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>components<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-smi\">$components</span></span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>\r\n<p>Каждый элемент массива должен быть ссылкой на файл компонента внутри которого описан метод <strong>createSitemap()</strong>:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">public</span> <span class=\"pl-k\">function</span> <span class=\"pl-en\">createSitemap</span>()</span>\r\n<span class=\"pl-s1\">{</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-k\">return</span> <span class=\"pl-smi\">$this</span><span class=\"pl-k\">-&gt;</span>getModel()<span class=\"pl-k\">-&gt;</span>whereActive(<span class=\"pl-c1\">1</span>)<span class=\"pl-k\">-&gt;</span>get();</span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n<p>возвращающий список элементов входящих в карту сайта.</p>\r\n<h2><a id=\"user-content-Генерация-карты-сайта\" class=\"anchor\" href=\"#%D0%93%D0%B5%D0%BD%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%BA%D0%B0%D1%80%D1%82%D1%8B-%D1%81%D0%B0%D0%B9%D1%82%D0%B0\" aria-hidden=\"true\"></a>Генерация карты сайта:</h2>\r\n<p>Перейдите по ссылке: <a href=\"http://yoursite.com/sitemap.xml\">http://yoursite.com/sitemap.xml</a></p>\r\n<h2><a id=\"user-content-Редактирование-шаблона-генерации-карты\" class=\"anchor\" href=\"#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D0%B0-%D0%B3%D0%B5%D0%BD%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8-%D0%BA%D0%B0%D1%80%D1%82%D1%8B\" aria-hidden=\"true\"></a>Редактирование шаблона генерации карты</h2>\r\n<p>Файл шаблона: <strong>larrock::front.sitemap</strong> Роут на карту прописан в <strong>routes.php</strong> у компонента <strong>LarrockCore</strong></p>',	'generirovanie-sitemapxml-karty-sayta',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 19:55:55',	'2017-10-23 19:56:29'),
(4,	'Artisan команды',	3,	'',	'<h2><a id=\"user-content-artisan-команды-larrockcore\" class=\"anchor\" href=\"#artisan-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B-larrockcore\" aria-hidden=\"true\"></a>Artisan-команды LarrockCore</h2>\r\n<ul>\r\n<li><code>larrock:check</code> - проверка настроек необходимых для корректной работы системы</li>\r\n<li><code>larrock:updateEnv</code> - внесение в файл .env значений используемых в LarrockCMS</li>\r\n<li><code>larrock:manager</code> - установка/обновление компонентов системы</li>\r\n</ul>\r\n<h2><a id=\"user-content-artisan-команды-larrockwizard\" class=\"anchor\" href=\"#artisan-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B-larrockwizard\" aria-hidden=\"true\"></a>Artisan-команды LarrockWizard</h2>\r\n<ul>\r\n<li><code>php artisan wizard:import</code> - запуск импорта (при этом вам будет предложено удалить старые данные).\r\n<ul>\r\n<li><code>--sleep=0</code> - сколько секунд ждать после 1 секунды выполнения</li>\r\n<li><code>--silence=1</code> - запуск команды без диалогов (в тихом режиме)</li>\r\n<li><code>--withoutimage=1</code> - запуск команды без удаления/генерации картинок</li>\r\n</ul>\r\n</li>\r\n<li><code>php artisan wizard:sheet --sheet=0</code> - запуск импорта конкретного листа прайса\r\n<ul>\r\n<li><code>--sheet=0</code> - индекс листа прайса (первый - 0)</li>\r\n<li><code>--sleep=0</code> - сколько секунд ждать после 1 секунды выполнения</li>\r\n<li><code>--silence=1</code> - запуск команды без диалогов (в тихом режиме)</li>\r\n<li><code>--withoutimage=1</code> - запуск команды без генерации картинок</li>\r\n</ul>\r\n</li>\r\n<li><code>php artisan wizard:clear --sleep=0</code> - очистка каталога (БД и картинки).\r\n<ul>\r\n<li><code>--sleep=0</code> - сколько секунд ждать после 1 секунды выполнения</li>\r\n<li><code>--silence=1</code> - запуск команды без диалогов (в тихом режиме)</li>\r\n<li><code>--withoutimage=1</code> - запуск команды без удаления картинок</li>\r\n</ul>\r\n</li>\r\n</ul>',	'artisan-komandy',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 19:56:41',	'2017-10-23 19:57:00'),
(6,	'Вывод меню на фронт (Middleware AddMenuFront)',	6,	'',	'<p>Для вывода компонентов меню используется Middleware AddMenuFront (/vendor/fanamurov/larrock-menu/src/Middleware/AddMenuFront.php).</p>\r\n<p>В шаблоне вывода шарятся переменные menu_тип меню (по-умолчанию $menu_default).</p>\r\n<p>В переменную помещаются опубликованные пункты меню разделенные по типам ввиде коллекции.</p>\r\n<p>Чтобы добавить возможность делать пункт меню активным следует в данных пункта меню заполнить поле \"Связь\", где можно указать url (начав его с \"/\") или имя роута. Активный пункт меню имеет атрибут selected.</p>',	'vyvod-menyu-na-front-middleware-addmenufront',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 20:53:03',	'2017-10-23 20:53:57'),
(7,	'Права и роли',	7,	'',	'<ul>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#hasroleandpermission-trait-and-contract\">HasRoleAndPermission Trait And Contract</a></li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#usage\">Usage</a>\r\n<ul>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#creating-roles\">Creating Roles</a></li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#attaching-detaching-and-syncing-roles\">Attaching, Detaching and Syncing Roles</a></li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#checking-for-roles\">Checking For Roles</a></li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#levels\">Levels</a></li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#creating-permissions\">Creating Permissions</a></li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#attaching-detaching-and-syncing-permissions\">Attaching, Detaching and Syncing Permissions</a></li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#checking-for-permissions\">Checking For Permissions</a></li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#permissions-inheriting\">Permissions Inheriting</a></li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#entity-check\">Entity Check</a></li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#blade-extensions\">Blade Extensions</a></li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#middleware\">Middleware</a></li>\r\n</ul>\r\n</li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#config-file\">Config File</a></li>\r\n<li><a href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#more-information\">More Information</a></li>\r\n</ul>\r\n<h3><a id=\"user-content-hasroleandpermission-trait-and-contract\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#hasroleandpermission-trait-and-contract\" aria-hidden=\"true\"></a>HasRoleAndPermission Trait And Contract</h3>\r\n<p>Include&nbsp;<code>HasRoleAndPermission</code>&nbsp;trait and also implement&nbsp;<code>HasRoleAndPermission</code>&nbsp;contract inside your&nbsp;<code>User</code>&nbsp;model.</p>\r\n<h2><a id=\"user-content-usage\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#usage\" aria-hidden=\"true\"></a>Usage</h2>\r\n<h3><a id=\"user-content-creating-roles\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#creating-roles\" aria-hidden=\"true\"></a>Creating Roles</h3>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">use</span> <span class=\"pl-c1\">Larrock\\LarrockUsers\\Roles\\Models\\Role</span>;</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$adminRole</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">Role</span><span class=\"pl-k\">::</span>create([</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>name<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Admin<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>slug<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>admin<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>description<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span><span class=\"pl-pds\">\'</span></span>, <span class=\"pl-c\">// optional</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>level<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">1</span>, <span class=\"pl-c\">// optional, set to 1 by default</span></span>\r\n<span class=\"pl-s1\">]);</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$moderatorRole</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">Role</span><span class=\"pl-k\">::</span>create([</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>name<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Forum Moderator<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>slug<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>forum.moderator<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">]);</span></pre>\r\n</div>\r\n<blockquote>\r\n<p>Because of&nbsp;<code>Slugable</code>&nbsp;trait, if you make a mistake and for example leave a space in slug parameter, it\'ll be replaced with a dot automatically, because of&nbsp;<code>str_slug</code>&nbsp;function.</p>\r\n</blockquote>\r\n<h3><a id=\"user-content-attaching-detaching-and-syncing-roles\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#attaching-detaching-and-syncing-roles\" aria-hidden=\"true\"></a>Attaching, Detaching and Syncing Roles</h3>\r\n<p>It\'s really simple. You fetch a user from database and call&nbsp;<code>attachRole</code>&nbsp;method. There is&nbsp;<code>BelongsToMany</code>&nbsp;relationship between&nbsp;<code>User</code>&nbsp;and&nbsp;<code>Role</code>&nbsp;model.</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-smi\">$user</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">User</span><span class=\"pl-k\">::</span>find(<span class=\"pl-smi\">$id</span>);</span>\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>attachRole(<span class=\"pl-smi\">$adminRole</span>); <span class=\"pl-c\">// you can pass whole object, or just an id</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>detachRole(<span class=\"pl-smi\">$adminRole</span>); <span class=\"pl-c\">// in case you want to detach role</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>detachAllRoles(); <span class=\"pl-c\">// in case you want to detach all roles</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>syncRoles(<span class=\"pl-smi\">$roles</span>); <span class=\"pl-c\">// you can pass Eloquent collection, or just an array of ids</span></span></pre>\r\n</div>\r\n<h3><a id=\"user-content-checking-for-roles\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#checking-for-roles\" aria-hidden=\"true\"></a>Checking For Roles</h3>\r\n<p>You can now check if the user has required role.</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">if</span> (<span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>hasRole(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>admin<span class=\"pl-pds\">\'</span></span>)) { <span class=\"pl-c\">// you can pass an id or slug</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">//</span></span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n<p>You can also do this:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">if</span> (<span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>isAdmin()) {</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">//</span></span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n<p>And of course, there is a way to check for multiple roles:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">if</span> (<span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>hasRole([<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>admin<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>moderator<span class=\"pl-pds\">\'</span></span>])) { </span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">/*</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\">    | Or alternatively:</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\">    | $user-&gt;hasRole(\'admin, moderator\'), $user-&gt;hasRole(\'admin|moderator\'),</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\">    | $user-&gt;hasOneRole(\'admin, moderator\'), $user-&gt;hasOneRole([\'admin\', \'moderator\']), $user-&gt;hasOneRole(\'admin|moderator\')</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\">    */</span></span>\r\n\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">// The user has at least one of the roles</span></span>\r\n<span class=\"pl-s1\">}</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">if</span> (<span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>hasRole([<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>admin<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>moderator<span class=\"pl-pds\">\'</span></span>], <span class=\"pl-c1\">true</span>)) {</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">/*</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\">    | Or alternatively:</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\">    | $user-&gt;hasRole(\'admin, moderator\', true), $user-&gt;hasRole(\'admin|moderator\', true),</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\">    | $user-&gt;hasAllRoles(\'admin, moderator\'), $user-&gt;hasAllRoles([\'admin\', \'moderator\']), $user-&gt;hasAllRoles(\'admin|moderator\')</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\">    */</span></span>\r\n\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">// The user has all roles</span></span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n<h3><a id=\"user-content-levels\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#levels\" aria-hidden=\"true\"></a>Levels</h3>\r\n<p>When you are creating roles, there is optional parameter&nbsp;<code>level</code>. It is set to&nbsp;<code>1</code>&nbsp;by default, but you can overwrite it and then you can do something like this:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">if</span> (<span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>level() <span class=\"pl-k\">&gt;</span> <span class=\"pl-c1\">4</span>) {</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">//</span></span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n<blockquote>\r\n<p>If user has multiple roles, method&nbsp;<code>level</code>&nbsp;returns the highest one.</p>\r\n</blockquote>\r\n<p><code>Level</code>&nbsp;has also big effect on inheriting permissions. About it later.</p>\r\n<h3><a id=\"user-content-creating-permissions\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#creating-permissions\" aria-hidden=\"true\"></a>Creating Permissions</h3>\r\n<p>It\'s very simple thanks to&nbsp;<code>Permission</code>&nbsp;model.</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">use</span> <span class=\"pl-c1\">Larrock\\LarrockUsers\\Roles\\Models\\Permission</span>;</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$createUsersPermission</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">Permission</span><span class=\"pl-k\">::</span>create([</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>name<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Create users<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>slug<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>create.users<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>description<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span><span class=\"pl-pds\">\'</span></span>, <span class=\"pl-c\">// optional</span></span>\r\n<span class=\"pl-s1\">]);</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$deleteUsersPermission</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">Permission</span><span class=\"pl-k\">::</span>create([</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>name<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Delete users<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>slug<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>delete.users<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">]);</span></pre>\r\n</div>\r\n<h3><a id=\"user-content-attaching-detaching-and-syncing-permissions\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#attaching-detaching-and-syncing-permissions\" aria-hidden=\"true\"></a>Attaching, Detaching and Syncing Permissions</h3>\r\n<p>You can attach permissions to a role or directly to a specific user (and of course detach them as well).</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">use</span> <span class=\"pl-c1\">Larrock\\LarrockUsers\\Roles\\Models\\Role</span>;</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$role</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">Role</span><span class=\"pl-k\">::</span>find(<span class=\"pl-smi\">$roleId</span>);</span>\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$role</span><span class=\"pl-k\">-&gt;</span>attachPermission(<span class=\"pl-smi\">$createUsersPermission</span>); <span class=\"pl-c\">// permission attached to a role</span></span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$user</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">User</span><span class=\"pl-k\">::</span>find(<span class=\"pl-smi\">$userId</span>);</span>\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>attachPermission(<span class=\"pl-smi\">$deleteUsersPermission</span>); <span class=\"pl-c\">// permission attached to a user</span></span></pre>\r\n</div>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-smi\">$role</span><span class=\"pl-k\">-&gt;</span>detachPermission(<span class=\"pl-smi\">$createUsersPermission</span>); <span class=\"pl-c\">// in case you want to detach permission</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$role</span><span class=\"pl-k\">-&gt;</span>detachAllPermissions(); <span class=\"pl-c\">// in case you want to detach all permissions</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$role</span><span class=\"pl-k\">-&gt;</span>syncPermissions(<span class=\"pl-smi\">$permissions</span>); <span class=\"pl-c\">// you can pass Eloquent collection, or just an array of ids</span></span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>detachPermission(<span class=\"pl-smi\">$deleteUsersPermission</span>);</span>\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>detachAllPermissions();</span>\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>syncPermissions(<span class=\"pl-smi\">$permissions</span>); <span class=\"pl-c\">// you can pass Eloquent collection, or just an array of ids</span></span></pre>\r\n</div>\r\n<h3><a id=\"user-content-checking-for-permissions\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#checking-for-permissions\" aria-hidden=\"true\"></a>Checking For Permissions</h3>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">if</span> (<span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>hasPermission(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>create.users<span class=\"pl-pds\">\'</span></span>)) { <span class=\"pl-c\">// you can pass an id or slug</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">//</span></span>\r\n<span class=\"pl-s1\">}</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">if</span> (<span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>canDeleteUsers()) {</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">//</span></span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n<p>You can check for multiple permissions the same way as roles. You can make use of additional methods like&nbsp;<code>hasOnePermission</code>&nbsp;or&nbsp;<code>hasAllPermissions</code>.</p>\r\n<h3><a id=\"user-content-permissions-inheriting\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#permissions-inheriting\" aria-hidden=\"true\"></a>Permissions Inheriting</h3>\r\n<p>Role with higher level is inheriting permission from roles with lower level.</p>\r\n<p>There is an example of this&nbsp;<code>magic</code>:</p>\r\n<p>You have three roles:&nbsp;<code>user</code>,&nbsp;<code>moderator</code>&nbsp;and&nbsp;<code>admin</code>. User has a permission to read articles, moderator can manage comments and admin can create articles. User has a level 1, moderator level 2 and admin level 3. It means, moderator and administrator has also permission to read articles, but administrator can manage comments as well.</p>\r\n<blockquote>\r\n<p>If you don\'t want permissions inheriting feature in you application, simply ignore&nbsp;<code>level</code>parameter when you\'re creating roles.</p>\r\n</blockquote>\r\n<h3><a id=\"user-content-entity-check\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#entity-check\" aria-hidden=\"true\"></a>Entity Check</h3>\r\n<p>Let\'s say you have an article and you want to edit it. This article belongs to a user (there is a column&nbsp;<code>user_id</code>&nbsp;in articles table).</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">use</span> <span class=\"pl-c1\">App\\Article</span>;</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">use</span> <span class=\"pl-c1\">Larrock\\LarrockUsers\\Roles\\Models\\Permission</span>;</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$editArticlesPermission</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">Permission</span><span class=\"pl-k\">::</span>create([</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>name<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Edit articles<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>slug<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>edit.articles<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>model<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>App\\Article<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">]);</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>attachPermission(<span class=\"pl-smi\">$editArticlesPermission</span>);</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$article</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">Article</span><span class=\"pl-k\">::</span>find(<span class=\"pl-c1\">1</span>);</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">if</span> (<span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>allowed(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>edit.articles<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-smi\">$article</span>)) { <span class=\"pl-c\">// $user-&gt;allowedEditArticles($article)</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">//</span></span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n<p>This condition checks if the current user is the owner of article. If not, it will be looking inside user permissions for a row we created before.</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">if</span> (<span class=\"pl-smi\">$user</span><span class=\"pl-k\">-&gt;</span>allowed(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>edit.articles<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-smi\">$article</span>, <span class=\"pl-c1\">false</span>)) { <span class=\"pl-c\">// now owner check is disabled</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">//</span></span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n<h3><a id=\"user-content-blade-extensions\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#blade-extensions\" aria-hidden=\"true\"></a>Blade Extensions</h3>\r\n<p>There are four Blade extensions. Basically, it is replacement for classic if statements.</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">@</span>role(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>admin<span class=\"pl-pds\">\'</span></span>) <span class=\"pl-c\">// @if(Auth::check() &amp;&amp; Auth::user()-&gt;hasRole(\'admin\'))</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">// user has admin role</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span><span class=\"pl-c1\">endrole</span></span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span>permission(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>edit.articles<span class=\"pl-pds\">\'</span></span>) <span class=\"pl-c\">// @if(Auth::check() &amp;&amp; Auth::user()-&gt;hasPermission(\'edit.articles\'))</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">// user has edit articles permissison</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span><span class=\"pl-c1\">endpermission</span></span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span>level(<span class=\"pl-c1\">2</span>) <span class=\"pl-c\">// @if(Auth::check() &amp;&amp; Auth::user()-&gt;level() &gt;= 2)</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">// user has level 2 or higher</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span><span class=\"pl-c1\">endlevel</span></span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span>allowed(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>edit<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-smi\">$article</span>) <span class=\"pl-c\">// @if(Auth::check() &amp;&amp; Auth::user()-&gt;allowed(\'edit\', $article))</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">// show edit button</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span><span class=\"pl-c1\">endallowed</span></span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span>role(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>admin|moderator<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-c1\">true</span>) <span class=\"pl-c\">// @if(Auth::check() &amp;&amp; Auth::user()-&gt;hasRole(\'admin|moderator\', true))</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">// user has admin and moderator role</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span><span class=\"pl-k\">else</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">// something else</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span><span class=\"pl-c1\">endrole</span></span></pre>\r\n</div>\r\n<h3><a id=\"user-content-middleware\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#middleware\" aria-hidden=\"true\"></a>Middleware</h3>\r\n<p>This package comes with&nbsp;<code>VerifyRole</code>,&nbsp;<code>VerifyPermission</code>&nbsp;and&nbsp;<code>VerifyLevel</code>&nbsp;middleware. You must add them inside your&nbsp;<code>app/Http/Kernel.php</code>&nbsp;file.</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-c\">/**</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\"> * The application\'s route middleware.</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\"> *</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\"> * <span class=\"pl-k\">@var</span> array</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\"> */</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">protected</span> <span class=\"pl-smi\">$routeMiddleware</span> <span class=\"pl-k\">=</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>auth<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">\\App\\Http\\Middleware\\</span><span class=\"pl-c1\">Authenticate</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>auth.basic<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">\\Illuminate\\Auth\\Middleware\\</span><span class=\"pl-c1\">AuthenticateWithBasicAuth</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>guest<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">\\App\\Http\\Middleware\\</span><span class=\"pl-c1\">RedirectIfAuthenticated</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>role<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">\\Ultraware\\Roles\\Middleware\\</span><span class=\"pl-c1\">VerifyRole</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>permission<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">\\Ultraware\\Roles\\Middleware\\</span><span class=\"pl-c1\">VerifyPermission</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>level<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">\\Ultraware\\Roles\\Middleware\\</span><span class=\"pl-c1\">VerifyLevel</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span>,</span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>\r\n<p>Now you can easily protect your routes.</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-smi\">$router</span><span class=\"pl-k\">-&gt;</span>get(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/example<span class=\"pl-pds\">\'</span></span>, [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>as<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>example<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>middleware<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>role:admin<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>uses<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>ExampleController@index<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">]);</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$router</span><span class=\"pl-k\">-&gt;</span>post(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/example<span class=\"pl-pds\">\'</span></span>, [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>as<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>example<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>middleware<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>permission:edit.articles<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>uses<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>ExampleController@index<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">]);</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$router</span><span class=\"pl-k\">-&gt;</span>get(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/example<span class=\"pl-pds\">\'</span></span>, [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>as<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>example<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>middleware<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>level:2<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-c\">// level &gt;= 2</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>uses<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>ExampleController@index<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">]);</span></pre>\r\n</div>\r\n<p>It throws&nbsp;<code>\\Larrock\\LarrockUsers\\Roles\\Exceptions\\RoleDeniedException</code>,&nbsp;<code>\\Larrock\\LarrockUsers\\Roles\\Exceptions\\PermissionDeniedException</code>&nbsp;or&nbsp;<code>\\Larrock\\LarrockUsers\\Roles\\Exceptions\\LevelDeniedException</code>&nbsp;exceptions if it goes wrong.</p>\r\n<p>You can catch these exceptions inside&nbsp;<code>app/Exceptions/Handler.php</code>&nbsp;file and do whatever you want.</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-c\">/**</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\"> * Render an exception into an HTTP response.</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\"> *</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\"> * <span class=\"pl-k\">@param</span>  \\Illuminate\\Http\\Request  $request</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\"> * <span class=\"pl-k\">@param</span>  \\Exception  $e</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\"> * <span class=\"pl-k\">@return</span> \\Illuminate\\Http\\Response</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-c\"> */</span></span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">public</span> <span class=\"pl-k\">function</span> <span class=\"pl-en\">render</span>(<span class=\"pl-smi\">$request</span>, <span class=\"pl-c1\">Exception</span> <span class=\"pl-smi\">$e</span>)</span>\r\n<span class=\"pl-s1\">{</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">$e</span> <span class=\"pl-k\">instanceof</span> <span class=\"pl-c1\">\\Ultraware\\Roles\\Exceptions\\</span><span class=\"pl-c1\">RoleDeniedException</span>) {</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-c\">// you can for example flash message, redirect...</span></span>\r\n<span class=\"pl-s1\">        <span class=\"pl-k\">return</span> redirect()<span class=\"pl-k\">-&gt;</span>back();</span>\r\n<span class=\"pl-s1\">    }</span>\r\n\r\n<span class=\"pl-s1\">    <span class=\"pl-k\">return</span> <span class=\"pl-k\">parent</span><span class=\"pl-k\">::</span>render(<span class=\"pl-smi\">$request</span>, <span class=\"pl-smi\">$e</span>);</span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n<h2><a id=\"user-content-config-file\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#config-file\" aria-hidden=\"true\"></a>Config File</h2>\r\n<p>You can change connection for models, slug separator, models path and there is also a handy pretend feature. Have a look at config file for more information.</p>\r\n<h2><a id=\"user-content-more-information\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B0-%D0%B8-%D1%80%D0%BE%D0%BB%D0%B8#more-information\" aria-hidden=\"true\"></a>More Information</h2>\r\n<p>For more information, please have a look at HasRoleAndPermission contract.</p>',	'prava-i-roli',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:01:43',	'2017-10-23 21:02:05'),
(8,	'Вывод блоков в шаблоне (AddBlocksTemplate Middleware)',	8,	'<p>Вывести данные блока можно тремя способами.</p>',	'<h2>В шаблоне</h2>\r\n<h3>Вывод через @blade-директиву</h3>\r\n<pre class=\"language-markup\"><code>@renderBlock(h1)</code></pre>\r\n<p>где <em>h1</em> - url блока</p>\r\n<h3>Вывод через&nbsp;Middleware AddBlocksTemplate</h3>\r\n<p>Для вывода компонентов меню используется Middleware AddBlocksTemplate (/vendor/fanamurov/larrock-blocks/src/Middleware/AddBlocksTemplate.php).</p>\r\n<p>В шаблоне вывода шарятся переменные с контентом (коллекция данных) блока по его url. Например: {{ $block_main }}. Для вывода блока удобнее всего использовать:</p>\r\n<pre><code>@if(isset($block_main))\r\n    @include(\'larrock::front.modules.html.text\', [\'data\' =&gt; $block_main])\r\n@endif\r\n</code></pre>\r\n<p>в таком случае блок будет обрамлен своим контейнером и получит быструю ссылку на редактирование в админку.</p>\r\n<p>&nbsp;</p>\r\n<h2>Внутри материала компонента</h2>\r\n<pre class=\"language-markup\"><code>{Блок[default]=h2}</code></pre>\r\n<p>где <em>h2</em> - url блока</p>',	'vyvod-blokov-v-shablone-addblockstemplate-middleware',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:11:14',	'2017-10-25 18:46:56'),
(9,	'Вывод и редактирование форм',	9,	'',	'<h2>Вывод формы в шаблоне</h2>\r\n<pre><code>@include(\'larrock::front.modules.forms.backphone\')\r\n</code></pre>\r\n<h2><a id=\"user-content-Созданиенастройка-форм\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B8-%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%84%D0%BE%D1%80%D0%BC#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D1%84%D0%BE%D1%80%D0%BC\" aria-hidden=\"true\"></a>Создание/настройка форм</h2>\r\n<p>В файле /config/<strong>larrock-form.php</strong></p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>ИмяФормы<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>ключКонфига<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>значениеКонфига<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-k\">...</span></span>\r\n<span class=\"pl-s1\">    ],</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Другая форма<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">	    <span class=\"pl-k\">...</span></span>\r\n<span class=\"pl-s1\">    ],</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-k\">...</span></span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>\r\n<h3><a id=\"user-content-Значения-доступные-для-настройки\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B8-%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%84%D0%BE%D1%80%D0%BC#%D0%97%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BD%D1%8B%D0%B5-%D0%B4%D0%BB%D1%8F-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8\" aria-hidden=\"true\"></a>Значения доступные для настройки:</h3>\r\n<p><em>Обязательные:</em></p>\r\n<ul>\r\n<li>name - Имя формы для людей</li>\r\n<li>view - шаблон формы для фронта</li>\r\n<li>emailTemplate - шаблон письма</li>\r\n</ul>\r\n<p><em>Опциональные:</em></p>\r\n<ul>\r\n<li>emailFrom - значение поля \'form\' в письме</li>\r\n<li>emailDataExcept - какие данные из формы не передавать в шаблон письма</li>\r\n<li>emailSuccessMessage - текст сообщения при успешном отправлении письма</li>\r\n<li>emailSubject - заголовок письма</li>\r\n<li>emails - список email\'ов для отправки письма через запятую</li>\r\n<li>rules - правила валидации полей в виде массива</li>\r\n</ul>\r\n<p><strong>Пример конфига:</strong></p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$rule_captcha</span> <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>g-recaptcha-response<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span><span class=\"pl-pds\">\'</span></span>];</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">if</span>(env(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>INVISIBLE_RECAPTCHA_SITEKEY<span class=\"pl-pds\">\'</span></span>)){</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-smi\">$rule_captcha</span> <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>g-recaptcha-response<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>required|captcha<span class=\"pl-pds\">\'</span></span>];</span>\r\n<span class=\"pl-s1\">}</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>backphone<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>name<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Заказать звонок<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-c\">//название формы</span></span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>view<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>larrock::front.modules.forms.backphone<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-c\">//шаблон формы для фронта</span></span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>emailTemplate<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>larrock::emails.formDefault<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-c\">//шаблон письма</span></span>\r\n\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>emailFrom<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>no-reply@<span class=\"pl-pds\">\'</span></span><span class=\"pl-k\">.</span> array_get(<span class=\"pl-smi\">$_SERVER</span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>HTTP_HOST<span class=\"pl-pds\">\'</span></span>), <span class=\"pl-c\">//email \"от кого\"</span></span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>emailDataExcept<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>g-recaptcha-response<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>_token<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>agree<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>form<span class=\"pl-pds\">\'</span></span>], <span class=\"pl-c\">//что не передавать в шаблон email</span></span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>emailSuccessMessage<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Отправлена форма заявки <span class=\"pl-pds\">\'</span></span><span class=\"pl-k\">.</span> env(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>SITE_NAME<span class=\"pl-pds\">\'</span></span>, env(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>APP_URL<span class=\"pl-pds\">\'</span></span>)), <span class=\"pl-c\">//сообщение об успешной отправке</span></span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>emailSubject<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Отправлена форма заявки <span class=\"pl-pds\">\'</span></span><span class=\"pl-k\">.</span> env(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>SITE_NAME<span class=\"pl-pds\">\'</span></span>, env(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>APP_URL<span class=\"pl-pds\">\'</span></span>)), <span class=\"pl-c\">//тема письма</span></span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>emails<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> env(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>MAIL_TO_ADMIN<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>robot@martds.ru<span class=\"pl-pds\">\'</span></span>), <span class=\"pl-c\">//кому присылать письма</span></span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>rules<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>name<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>required<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>contact<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>required<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>agree<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>required<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-smi\">$rule_captcha</span></span>\r\n<span class=\"pl-s1\">        ], <span class=\"pl-c\">//правила валидации</span></span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>forms_log<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">TRUE</span>, <span class=\"pl-c\">//сохранять ли письма в БД</span></span>\r\n<span class=\"pl-s1\">    ],</span>\r\n\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>forms_log<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">TRUE</span>, <span class=\"pl-c\">//сохранять ли письма в БД (глобальная установка)</span></span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>\r\n<h2><a id=\"user-content-Редактирование-шаблонов-писем\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B8-%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%84%D0%BE%D1%80%D0%BC#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D0%BE%D0%B2-%D0%BF%D0%B8%D1%81%D0%B5%D0%BC\" aria-hidden=\"true\"></a>Редактирование шаблонов писем</h2>\r\n<p>Шаблоны писем находятся в папке: /views/vendor/larrock/emails/ По-умолчанию используется шаблон formDefault.blade.php</p>\r\n<h2><a id=\"user-content-Редактирование-шаблонов-форм\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B8-%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%84%D0%BE%D1%80%D0%BC#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D0%BE%D0%B2-%D1%84%D0%BE%D1%80%D0%BC\" aria-hidden=\"true\"></a>Редактирование шаблонов форм</h2>\r\n<p>По-умолчанию шаблоны находятся в папке: /views/vendor/larrock/modules/forms/</p>\r\n<h2><a id=\"user-content-Локализация-названий-полей\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B8-%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%84%D0%BE%D1%80%D0%BC#%D0%9B%D0%BE%D0%BA%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F-%D0%BD%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D0%B9-%D0%BF%D0%BE%D0%BB%D0%B5%D0%B9\" aria-hidden=\"true\"></a>Локализация названий полей</h2>\r\n<p>Файлы локализации находятся в файле: /lang/vendor/larrock/XXX/<strong>fields.php</strong></p>\r\n<h2><a id=\"user-content-formrequest-и-jsvalidator-ajax-валидация-полей\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B8-%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%84%D0%BE%D1%80%D0%BC#formrequest-%D0%B8-jsvalidator-ajax-%D0%B2%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%86%D0%B8%D1%8F-%D0%BF%D0%BE%D0%BB%D0%B5%D0%B9\" aria-hidden=\"true\"></a>FormRequest и JsValidator (ajax-валидация полей)</h2>\r\n<p>По-умолчанию правила валидации берутся из файла конфига /config/<strong>larrock-form.php</strong>из секции rules.</p>\r\n<h3><a id=\"user-content-Создание-и-подключение-нового-formrequest\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B8-%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%84%D0%BE%D1%80%D0%BC#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BD%D0%BE%D0%B2%D0%BE%D0%B3%D0%BE-formrequest\" aria-hidden=\"true\"></a>Создание и подключение нового FormRequest</h3>\r\n<ol>\r\n<li>Создайте новый FormRequest</li>\r\n</ol>\r\n<pre lang=\"ssh\"><code>php artisan make:request\r\n</code></pre>\r\n<ol start=\"2\">\r\n<li>C методом rules вида:</li>\r\n</ol>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">public</span> <span class=\"pl-k\">function</span> <span class=\"pl-en\">rules</span>()</span>\r\n<span class=\"pl-s1\">{</span>\r\n<span class=\"pl-s1\">	<span class=\"pl-k\">return</span> config(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>larrock-form.ИмяФормы.rules<span class=\"pl-pds\">\'</span></span>);</span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n<ol start=\"3\">\r\n<li>Подключите его в шаблоне формы:</li>\r\n</ol>\r\n<pre><code>{!! JsValidator::formRequest(\'НазваниеФормыRequest\', \'#IDФормы\')-&gt;render() !!}</code></pre>',	'vyvod-i-redaktirovanie-form',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:13:01',	'2017-10-23 21:13:32'),
(10,	'FormsLog — логирование форм',	9,	'',	'<p>Все формы созданные через компонент LarrockContact логируются в БД Вашего сайта.</p>\r\n<p>Включить или отключить опцию сохранения можно в конфиге&nbsp;<code>/config/larrock-form.php</code></p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>backphone<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-k\">...</span></span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>forms_log<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">TRUE</span>, <span class=\"pl-c\">//сохранять ли письма в БД</span></span>\r\n<span class=\"pl-s1\">    ],</span>\r\n\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>forms_log<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">TRUE</span>, <span class=\"pl-c\">//сохранять ли письма в БД (глобальная установка)</span></span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>',	'formslog-logirovanie-form',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:13:39',	'2017-10-23 21:14:08'),
(11,	'Внесение и вывод SEO-данных',	10,	'',	'<h2>Внесение seo-данных</h2>\r\n<p>Создание title, description и keywords страниц происходит в админке&nbsp;<a href=\"http://yoursite.local/admin/seo/\">http://yoursite.local/admin/seo/</a>&nbsp;(в меню: Прочее - SEO). Либо через плагин SEO при редактировании конкретных материалов компонентов.</p>\r\n<h3><a id=\"user-content-Типы-маркеров-для-данных\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/LarrockAdminSeo-%28core%29#%D0%A2%D0%B8%D0%BF%D1%8B-%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%80%D0%BE%D0%B2-%D0%B4%D0%BB%D1%8F-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85\" aria-hidden=\"true\"></a>Типы маркеров для данных:</h3>\r\n<ul>\r\n<li>\'default\' =&gt; \'Обычный маркер\',</li>\r\n<li>\'postfix_global\' =&gt; \'Постфикс для всего сайта\',</li>\r\n<li>\'prefix_global\' =&gt; \'Префикс для всего сайта\',</li>\r\n<li>\'catalog_category_postfix\' =&gt; \'Постфикс для раздела каталога\',</li>\r\n<li>\'catalog_category_prefix\' =&gt; \'Префикс для раздела каталога\',</li>\r\n<li>\'catalog_item_postfix\' =&gt; \'Постфикс для страницы товара каталога\',</li>\r\n<li>\'catalog_item_prefix\' =&gt; \'Префикс для страницы товара каталога\',</li>\r\n<li>\'catalog\' =&gt; \'Материал каталога\',</li>\r\n<li>\'page\' =&gt; \'Материал статичной страницы</li>\r\n<li>\'feed\' =&gt; \'Материал ленты\',</li>\r\n<li>\'category\' =&gt; \'Материал раздела\',</li>\r\n</ul>\r\n<h2><a id=\"user-content-Вывод-seo-данных\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/LarrockAdminSeo-%28core%29#%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-seo-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85\" aria-hidden=\"true\"></a>Вывод SEO-данных</h2>\r\n<ol>\r\n<li>Через GetSeo Middleware</li>\r\n<li>Через модель компонента по связи get_seo&nbsp;<em>Пример:</em></li>\r\n</ol>\r\n<pre><code>$data-&gt;get_seo-&gt;seo_title</code></pre>',	'vnesenie-i-vyvod-seo-dannykh',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:15:37',	'2017-10-23 21:15:59'),
(12,	'Поиск по материалам компонентов (SiteSearch и SiteSearchAdmin)',	11,	'<p>Подключение middleware и модулей к работе. Обеспечение поиска внутри компонентов.</p>',	'<p><span class=\"uk-h2\">Подключение компонентов к поиску на фронте:</span></p>\r\n<p>Список компонентов размещается в файле конфига&nbsp;<strong>/config/larrock-search.php</strong></p>\r\n<pre class=\"language-php\"><code>&lt;?php\r\n\r\n$components = [];\r\n\r\nif(file_exists(base_path(). \'/vendor/fanamurov/larrock-pages\')){\r\n    $components[] = new \\Larrock\\ComponentPages\\PageComponent();\r\n}\r\n...\r\n\r\nreturn [\r\n    \'components\' =&gt; $components\r\n];</code></pre>\r\n<p>&nbsp;</p>\r\n<p><span class=\"uk-h2\">Вывод модуля поиска и подключение SiteSearch Middleware</span></p>\r\n<p>Подключите к роутам нужной группы в routes.php или включите в группу \'web\' в /app/Http/Kernel.php</p>\r\n<pre class=\"language-php\"><code>use Larrock\\ComponentSearch\\Middleware\\SiteSearch;</code></pre>\r\n<pre class=\"language-php\"><code>    protected $middlewareGroups = [\r\n        \'web\' =&gt; [\r\n            ...\r\n            SiteSearch::class,\r\n        ],\r\n    ];</code></pre>\r\n<p><span class=\"uk-h3\">Подключите вывод модуля в шаблоне:</span></p>\r\n<pre class=\"language-php\"><code>{!! $searchSite !!}</code></pre>\r\n<p>&nbsp;</p>\r\n<p><a id=\"user-content-Подключение-компонентов-к-поиску\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-LarrockAdminSearch#%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2-%D0%BA-%D0%BF%D0%BE%D0%B8%D1%81%D0%BA%D1%83\" aria-hidden=\"true\"></a><span class=\"uk-h2\">Подключение компонентов к поиску в админке:</span></p>\r\n<p>Список компонентов размещается в файле конфига&nbsp;<strong>/config/larrock-admin-search.php</strong></p>\r\n<pre class=\"language-php\"><code>&lt;?php\r\n\r\n$components = [];\r\n\r\nif(file_exists(base_path(). \'/vendor/fanamurov/larrock-pages\')){\r\n    $components[] = new \\Larrock\\ComponentPages\\PageComponent();\r\n}\r\n...\r\n\r\nreturn [\r\n    \'components\' =&gt; $components\r\n];</code></pre>\r\n<p>Подключение модуля в админке ничем не отличается от&nbsp;<strong>SiteSearch</strong>, только в данном случае все именуется&nbsp;<strong>SiteSearchAdmin</strong>.</p>\r\n<p>&nbsp;</p>\r\n<p><span class=\"uk-h2\">Обеспечение работы поиска внутри компонента</span></p>\r\n<p>Компонент должен иметь метод <strong>search()</strong> возвращающий список материалов для проведения поиска. Пример из <strong>CategoryComponent.php</strong></p>\r\n<pre class=\"language-php\"><code>    public function search()\r\n    {\r\n        return Cache::remember(\'search\'. $this-&gt;name, 1440, function(){\r\n            $data = [];\r\n            foreach (LarrockCategory::getModel()-&gt;whereActive(1)-&gt;with([\'get_parentActive\'])-&gt;get([\'id\', \'title\', \'parent\', \'component\', \'url\']) as $item){\r\n                $data[$item-&gt;id][\'id\'] = $item-&gt;id;\r\n                $data[$item-&gt;id][\'title\'] = $item-&gt;title;\r\n                $data[$item-&gt;id][\'full_url\'] = $item-&gt;full_url;\r\n                $data[$item-&gt;id][\'component\'] = $this-&gt;name;\r\n                $data[$item-&gt;id][\'category\'] = NULL;\r\n                if($item-&gt;get_parentActive){\r\n                    $data[$item-&gt;id][\'category\'] = $item-&gt;get_parentActive-&gt;title;\r\n                }\r\n            }\r\n            if(count($data) === 0){\r\n                return NULL;\r\n            }\r\n            return $data;\r\n        });\r\n    }</code></pre>',	'poisk-po-materialam-komponentov',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:16:55',	'2017-10-30 19:59:06'),
(13,	'Плагин создания анонсов (addAnonsToModule)',	12,	'<p>Для материалов в компоненте LarrockFeed можно автоматически создавать анонсы вдругих разделах LarrockFeed. Например, для создания анонсов новостей в отдельной ленте.</p>',	'<h2>Подключение плагина</h2>\r\n<p>В компоненте LarrockFeed плагин включен по-умолчанию. Для других компонентов его можно подключить таким же образом в конструкторе компонента:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">class</span> <span class=\"pl-en\">FeedComponent</span> <span class=\"pl-k\">extends</span> <span class=\"pl-e\">Component</span></span>\r\n<span class=\"pl-s1\">{</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">function</span> <span class=\"pl-c1\">__construct</span>()</span>\r\n<span class=\"pl-s1\">    {</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-smi\">$this</span><span class=\"pl-k\">-&gt;</span>addAnonsToModule(config(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>larrock.feed.anonsCategory<span class=\"pl-pds\">\'</span></span>));</span>\r\n<span class=\"pl-s1\">    }</span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n<h2><a id=\"user-content-Конфигурация-плагина\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F-%D0%B0%D0%BD%D0%BE%D0%BD%D1%81%D0%BE%D0%B2-%28addAnonsToModule%29#%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%BF%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D0%B0\" aria-hidden=\"true\"></a>Конфигурация плагина</h2>\r\n<p>Указание ID раздела анонса: Файл&nbsp;<strong>/config/larrock.php</strong>:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>feed<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>anonsCategory<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">1</span></span>\r\n<span class=\"pl-s1\">    ]</span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>\r\n<h2><a id=\"user-content-Работа-плагина\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F-%D0%B0%D0%BD%D0%BE%D0%BD%D1%81%D0%BE%D0%B2-%28addAnonsToModule%29#%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D0%BF%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D0%B0\" aria-hidden=\"true\"></a>Работа плагина</h2>\r\n<p>В редактировании материала добавляется новый таб \"Добавление анонса\" с полями:</p>\r\n<ul>\r\n<li><strong>Сгенерировать для анонса заголовок и ссылку на новость.</strong>&nbsp;По-умолчанию: создает материал с заголовком от родительского и ссылкой на него.</li>\r\n<li><strong>Текст для анонса новости в модуле.</strong>&nbsp;Опционально: для внесения кастомного текста</li>\r\n</ul>',	'plagin-sozdaniya-anonsov-addanonstomodule',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:19:44',	'2017-10-23 21:20:09'),
(14,	'Поиск по каталогу с автоподсказчиком (CatalogSearch Middleware)',	14,	'<p>Позволяет реализовать автоподсказчик для модуля поиска по каталогу.</p>',	'<h2>Подключение модуля с автоподсказчиком</h2>\r\n<ol>\r\n<li>\r\n<p>Подключите middleware CatalogSearch для нужных роутов, либо добавьте в app/Http/Kernel.php в секцию \'web\':</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-c1\">Larrock\\ComponentCatalog\\Middleware\\</span><span class=\"pl-c1\">CatalogSearch</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span></span></pre>\r\n</div>\r\n</li>\r\n<li>\r\n<p>Вывод шаблона модуля:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">@</span><span class=\"pl-k\">if</span>(<span class=\"pl-c1\">file_exists</span>(base_path()<span class=\"pl-k\">.</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/vendor/fanamurov/larrock-catalog<span class=\"pl-pds\">\'</span></span>))</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-k\">@</span><span class=\"pl-k\">include</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>larrock::front.modules.search.catalog-autocomplite<span class=\"pl-pds\">\'</span></span>)</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span><span class=\"pl-k\">endif</span></span></pre>\r\n</div>\r\n</li>\r\n</ol>',	'poisk-po-katalogu-s-avtopodskazchikom-catalogsearch-middleware',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:30:52',	'2017-10-23 21:31:16'),
(15,	'Вывод случайных товаров (RandomCatalogItems Middleware)',	14,	'<p>Позволяет реализовать вывод случайных товаров каталога в виде модуля.</p>',	'<h2>Подключение модуля случайных товаров</h2>\r\n<ol>\r\n<li>\r\n<p>Подключите middleware RandomCatalogItems для нужных роутов, либо добавьте в app/Http/Kernel.php в секцию \'web\':</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-c1\">Larrock\\ComponentCatalog\\Middleware\\</span><span class=\"pl-c1\">RandomCatalogItems</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span></span></pre>\r\n</div>\r\n</li>\r\n<li>\r\n<p>Вывод шаблона модуля:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">@</span><span class=\"pl-k\">if</span>(<span class=\"pl-c1\">isset</span>(<span class=\"pl-smi\">$RandomCatalogItems</span>))</span>\r\n<span class=\"pl-s1\">	<span class=\"pl-k\">@</span><span class=\"pl-k\">include</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>larrock::front.modules.list.random_catalog_items<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-smi\">$RandomCatalogItems</span>)</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">@</span><span class=\"pl-k\">endif</span></span></pre>\r\n</div>\r\n</li>\r\n</ol>\r\n<h2><a id=\"user-content-Конфигурация-модуля\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-%D1%81%D0%BB%D1%83%D1%87%D0%B0%D0%B9%D0%BD%D1%8B%D1%85-%D1%82%D0%BE%D0%B2%D0%B0%D1%80%D0%BE%D0%B2-%28RandomCatalogItems-Middleware%29#%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8F\" aria-hidden=\"true\"></a>Конфигурация модуля</h2>\r\n<p>Изменение количества выводимых товаров: Создайте файл конфига /config/larrock.php</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>catalog<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>RandomCatalogItems<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">	        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>items<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">3</span>,</span>\r\n<span class=\"pl-s1\">	        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>categories<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [<span class=\"pl-c1\">1</span>,<span class=\"pl-c1\">2</span>,<span class=\"pl-c1\">3</span>, <span class=\"pl-k\">...</span>],</span>\r\n<span class=\"pl-s1\">	        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>level<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">3</span></span>\r\n<span class=\"pl-s1\">        ]</span>\r\n<span class=\"pl-s1\">    ]</span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>\r\n<p><strong>items</strong>&nbsp;- количество выводимых товаров. По-умолчанию: 3.&nbsp;<br /><strong>categories</strong>&nbsp;- разделы для выбора товаров (опционально). По-умолчанию: все опубликованные.&nbsp;<br /><strong>level</strong>&nbsp;- уровень раздела каталога для выборки товаров (опционально). По-умолчанию: 3.</p>',	'vyvod-sluchaynykh-tovarov-randomcatalogitems-middleware',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:31:30',	'2017-10-23 21:32:10'),
(16,	'Генерирование yml.xml карты каталога',	14,	'<p>Генерация карты каталога для импорта в Яндекс.Маркет, Яндекс.Вебмастер и т.д.</p>',	'<p>Link:&nbsp;<a href=\"http://yoursite/yml.xml\">http://yoursite/yml.xml</a>&nbsp;Action: CatalogController@YML</p>',	'generirovanie-ymlxml-karty-kataloga',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:32:25',	'2017-10-23 21:33:03'),
(17,	'Линкование страниц описаний для товаров/разделов каталога',	14,	'<p>Реализация страниц описания товаров и разделов через компонент LarrockFeed.</p>',	'<p>Прилинковать описание к разделу или товару в виде отдельного материала Feed в поле можно различными способами:</p>\r\n<ul>\r\n<li>На странице редактирования раздела/товара в админке заполнить поле \"ID материала Feed для описания\" значением ID материала</li>\r\n<li>Внести и заполнить в .xlsx файле импорта прайса поле \"ID описания\"</li>\r\n</ul>',	'linkovanie-stranits-opisaniy-dlya-tovarovrazdelov-kataloga',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:33:20',	'2017-10-23 21:34:09'),
(18,	'Настройка полей импорта',	17,	'',	'<p>По-умолчанию используется файл конфига&nbsp;<code>larrock-wizard.php</code>&nbsp;в виде:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>rows<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [ <span class=\"pl-c\">/* массив полей */</span></span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>naimenovanie<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [ <span class=\"pl-c\">/* имя поля в .xlsx файле (транслит с нижним подчеркиванием) */</span></span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>db<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>title<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-c\">/* в какое поле таблицы вносить */</span></span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>slug<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span><span class=\"pl-pds\">\'</span></span>, <span class=\"pl-c\">/* имя поля для вывода в шаблоне */</span></span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>template<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>all<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-c\">/* в каком месте шаблона выводить поле (null|category|item|all) */</span></span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>filters<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">null</span>, <span class=\"pl-c\">/* использование в фильтрах (null|lilu|sort|all) */</span></span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>admin<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>input<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-c\">/* в каком виде выводить на редактирование (null|input|select etc.) */</span></span>\r\n<span class=\"pl-s1\">        ],</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-k\">...</span></span>\r\n<span class=\"pl-s1\">    ]</span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>\r\n<h2><a id=\"user-content-Перезаписывание-настроек\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%BF%D0%BE%D0%BB%D0%B5%D0%B9-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0#%D0%9F%D0%B5%D1%80%D0%B5%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D1%8B%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA\" aria-hidden=\"true\"></a>Перезаписывание настроек</h2>\r\n<ul>\r\n<li>Через правку&nbsp;<code>larrock-wizard.php</code></li>\r\n<li>При редактировании настроек полей через админку LarrockWizard значения из файла конфига&nbsp;<code>larrock-wizard.php</code>&nbsp;будут перезаписаны/дополнены.</li>\r\n</ul>\r\n<h3><a id=\"user-content-Примечание-импорт-и-линкование-фотографий\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%BF%D0%BE%D0%BB%D0%B5%D0%B9-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%87%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82-%D0%B8-%D0%BB%D0%B8%D0%BD%D0%BA%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%84%D0%BE%D1%82%D0%BE%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%B9\" aria-hidden=\"true\"></a>Примечание: импорт и линкование фотографий</h3>\r\n<p>Для работы импорта картинок в файле&nbsp;<code>larrock-wizard.php</code>&nbsp;обязательно должно присутствовать в неизменном виде:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>rows<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>foto<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>db<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">null</span>,</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>slug<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span><span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>template<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">null</span>,</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>filters<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">null</span>,</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>admin<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">null</span>,</span>\r\n<span class=\"pl-s1\">        ]</span>\r\n<span class=\"pl-s1\">    ]</span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>\r\n<h3><a id=\"user-content-Примечение-линкование-страниц-описания\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%BF%D0%BE%D0%BB%D0%B5%D0%B9-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BB%D0%B8%D0%BD%D0%BA%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86-%D0%BE%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D1%8F\" aria-hidden=\"true\"></a>Примечение: линкование страниц описания</h3>\r\n<p>Для работы импорта картинок в файле&nbsp;<code>larrock-wizard.php</code>&nbsp;обязательно должно присутствовать в неизменном виде:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>rows<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>id_opisaniya<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>db<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>description_link<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>slug<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span><span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>template<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">null</span>,</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>filters<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">null</span>,</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>admin<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>input<span class=\"pl-pds\">\'</span></span>,</span>\r\n<span class=\"pl-s1\">        ]</span>\r\n<span class=\"pl-s1\">    ]</span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>\r\n<p>Так же внести и заполнить в .xlsx файле импорта прайса поле \"ID описания\"</p>',	'nastroyka-poley-importa',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:42:05',	'2017-10-23 21:42:17'),
(19,	'Прайс для импорта каталога на сайт',	17,	'',	'<h2>Правила составления прайса для импорта на сайт:</h2>\r\n<h3><a id=\"user-content-Нельзя-для-всех-полей\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B9%D1%81-%D0%B4%D0%BB%D1%8F-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0-%D0%BD%D0%B0-%D1%81%D0%B0%D0%B9%D1%82#%D0%9D%D0%B5%D0%BB%D1%8C%D0%B7%D1%8F-%D0%B4%D0%BB%D1%8F-%D0%B2%D1%81%D0%B5%D1%85-%D0%BF%D0%BE%D0%BB%D0%B5%D0%B9\" aria-hidden=\"true\"></a>Нельзя для всех полей:</h3>\r\n<ul>\r\n<li>Объединять колонки</li>\r\n<li>Использовать спец.символы (^&amp;*\'#)</li>\r\n<li>Использовать сложное оформление в ячейках (вставка картинок напрямую, цветовое, размерное оформление шрифта)</li>\r\n<li>Скрывать колонки и строки</li>\r\n<li>Переименовывать и добавлять колонки без консультации ДС Март</li>\r\n<li>Менять формат прайса на отличный от .xlsx</li>\r\n<li>Добавлять пустые строки при перечислении товаров и разделов</li>\r\n</ul>\r\n<h3><a id=\"user-content-Правила-работы-с-фотографиями\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B9%D1%81-%D0%B4%D0%BB%D1%8F-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0-%D0%BD%D0%B0-%D1%81%D0%B0%D0%B9%D1%82#%D0%9F%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B-%D1%81-%D1%84%D0%BE%D1%82%D0%BE%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D1%8F%D0%BC%D0%B8\" aria-hidden=\"true\"></a>Правила работы с фотографиями:</h3>\r\n<ul>\r\n<li>В поле &laquo;Фото&raquo; размещаются имена файлов картинок</li>\r\n<li>Только английские символы (A-z) и цифры</li>\r\n<li>Без пробелов в имени файла</li>\r\n<li>Обязательно указывать расширения файла (.jpg, .png и т.д.)</li>\r\n<li>При указании нескольких фото к одному товару, между именами файлов картинок ставится запятая (P1010079.jpg,P1010080.jpg,P1010081.jpg)</li>\r\n<li>Заполнив графу &laquo;фото&raquo; у раздела, затем ее можно будет использовать в качестве фото у товара</li>\r\n<li>Все фотографии складываются в одну папку (<strong>по-умолчанию: /public_html/media/Wizard</strong>), либо загружаются в виде архива через админ-интерфейс LarrockWizard</li>\r\n</ul>\r\n<hr />\r\n<p><strong>В поле &laquo;Цена&raquo; заносится только число</strong>, без указания валюты или мер измерения.</p>\r\n<h3><a id=\"user-content-Правила-работы-с-главными-разделами-листы-в-прайсе\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B9%D1%81-%D0%B4%D0%BB%D1%8F-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0-%D0%BD%D0%B0-%D1%81%D0%B0%D0%B9%D1%82#%D0%9F%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B-%D1%81-%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D1%8B%D0%BC%D0%B8-%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B0%D0%BC%D0%B8-%D0%BB%D0%B8%D1%81%D1%82%D1%8B-%D0%B2-%D0%BF%D1%80%D0%B0%D0%B9%D1%81%D0%B5\" aria-hidden=\"true\"></a>Правила работы с главными разделами (листы в прайсе):</h3>\r\n<ul>\r\n<li>Все листы прайса должны быть в одинаковом стиле (указание раздела, подраздела, товаров). Колонки описания могут быть разными</li>\r\n<li>Обязательные колонки: наименование, цена, фото</li>\r\n</ul>\r\n<h3><a id=\"user-content-Правила-работы-с-разделами\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B9%D1%81-%D0%B4%D0%BB%D1%8F-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0-%D0%BD%D0%B0-%D1%81%D0%B0%D0%B9%D1%82#%D0%9F%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B-%D1%81-%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B0%D0%BC%D0%B8\" aria-hidden=\"true\"></a>Правила работы с разделами:</h3>\r\n<p>Все разделы указываются с меткой вложенности раздела (уровень):</p>\r\n<ul>\r\n<li>Главный раздел - {=R1=}\r\n<ul>\r\n<li>Вложенный в главный - {=R2=}\r\n<ul>\r\n<li>Дочерний вложенного - {=R3=}</li>\r\n</ul>\r\n</li>\r\n</ul>\r\n</li>\r\n</ul>\r\n<p>В итоге получается следующая структура:</p>\r\n<ul>\r\n<li>Главный раздел{=R1=}\r\n<ul>\r\n<li>Вложенный в главный - {=R2=}\r\n<ul>\r\n<li>Дочерний вложенного - {=R3=}</li>\r\n<li>Дочерний вложенного - {=R3=}</li>\r\n<li>...</li>\r\n</ul>\r\n</li>\r\n<li>Вложенный в главный - {=R2=}\r\n<ul>\r\n<li>Дочерний вложенного - {=R3=}</li>\r\n<li>Дочерний вложенного - {=R3=}</li>\r\n<li>...</li>\r\n</ul>\r\n</li>\r\n<li>...</li>\r\n</ul>\r\n</li>\r\n</ul>\r\n<p>Будьте предельно внимательны при заполнении прайса. Вся информация с прайса появляется на сайте автоматически.</p>\r\n<h3><a id=\"user-content-Пример-прайса\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%B0%D0%B9%D1%81-%D0%B4%D0%BB%D1%8F-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0-%D0%BD%D0%B0-%D1%81%D0%B0%D0%B9%D1%82#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BF%D1%80%D0%B0%D0%B9%D1%81%D0%B0\" aria-hidden=\"true\"></a>Пример прайса:</h3>\r\n<p><a href=\"https://yadi.sk/i/KnNZhzf43MWFaf\">test.xlsx</a></p>',	'prays-dlya-importa-kataloga-na-sayt',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:42:32',	'2017-10-23 21:42:47'),
(20,	'Процесс импорта прайса, редактирование прайса',	17,	'',	'<h3>Редактирование прайса:</h3>\r\n<ul>\r\n<li>можно отредактировать файл прайса через любую программу работающую с файлами формата .xlsx (Windows - Excel, LibreOffice и т.д.; Mac - Tables и т.д.)</li>\r\n<li>можно воспользоваться интерфейсом панели управления LarrockWizard (<code>http://yousite.com/admin/wizard</code>, в меню это: Каталог-Wizard). При этом все изменения будут автоматически сохранены в файл</li>\r\n</ul>\r\n<h3><a id=\"user-content-Сопоставление-полей\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0-%D0%BF%D1%80%D0%B0%D0%B9%D1%81%D0%B0,-%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%B0%D0%B9%D1%81%D0%B0#%D0%A1%D0%BE%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D0%BE%D0%BB%D0%B5%D0%B9\" aria-hidden=\"true\"></a>Сопоставление полей</h3>\r\n<p>Перед началом импорта требуется сопоставить поля в .xlsx-прайсе и БД каталога. Для этого требуется перейти в админку Wizard&nbsp;<code>http://yousite.com/admin/wizard</code>&nbsp;и воспользоваться интерфейсом внизу страницы.</p>\r\n<h3><a id=\"user-content-Процесс-импорта\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0-%D0%BF%D1%80%D0%B0%D0%B9%D1%81%D0%B0,-%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%B0%D0%B9%D1%81%D0%B0#%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0\" aria-hidden=\"true\"></a>Процесс импорта</h3>\r\n<ul>\r\n<li>Загрузите файл прайса (путь:&nbsp;<code>/resources/wizard</code>) и фотографии (путь:&nbsp;<code>/public_html/media/Wizard</code>) к нему через FTP, либо web-интефейс, затем в ssh-консоли выполните:\r\n<ul>\r\n<li><code>php artisan wizard:import</code>&nbsp;- Запуск импорта (при этом вам будет предложено удалить старые данные).\r\n<ul>\r\n<li><code>--sleep=0</code>&nbsp;- сколько секунд ждать после 1 секунды выполнения</li>\r\n<li><code>--silence=1</code>&nbsp;- запуск команды без диалогов (в тихом режиме)</li>\r\n<li><code>--withoutimage=1</code>&nbsp;- запуск команды без удаления/генерации картинок</li>\r\n</ul>\r\n</li>\r\n<li><code>php artisan wizard:sheet --sheet=0</code>&nbsp;- Запуск импорта конкретного листа прайса\r\n<ul>\r\n<li><code>--sheet=0</code>&nbsp;- индекс листа прайса (первый - 0)</li>\r\n<li><code>--sleep=0</code>&nbsp;- сколько секунд ждать после 1 секунды выполнения</li>\r\n<li><code>--silence=1</code>&nbsp;- запуск команды без диалогов (в тихом режиме)</li>\r\n<li><code>--withoutimage=1</code>&nbsp;- запуск команды без генерации картинок</li>\r\n</ul>\r\n</li>\r\n<li><code>php artisan wizard:clear --sleep=0</code>&nbsp;-Очистка каталога.\r\n<ul>\r\n<li><code>--sleep=0</code>&nbsp;- сколько секунд ждать после 1 секунды выполнения</li>\r\n<li><code>--silence=1</code>&nbsp;- запуск команды без диалогов (в тихом режиме)</li>\r\n<li><code>--withoutimage=1</code>&nbsp;- запуск команды без удаления картинок</li>\r\n</ul>\r\n</li>\r\n</ul>\r\n</li>\r\n<li>можно воспользоваться интерфейсом панели управления LarrockWizard (/admin/wizard). Возможности: загрузка файла прайса, загрузка архива с фотографиями к прайсу, проверка корректности прайса, ручная очистка данных каталога, ручной запуск процесса импорта.&nbsp;<strong>Внимание: запуск импорта через web-интерфейс не является приоритетным! Вы можете столкнуться с проблемами производительности вашего сервера и вашего ПК.</strong></li>\r\n</ul>\r\n<h3><a id=\"user-content-Импорт-через-crontab\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0-%D0%BF%D1%80%D0%B0%D0%B9%D1%81%D0%B0,-%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%B0%D0%B9%D1%81%D0%B0#%D0%98%D0%BC%D0%BF%D0%BE%D1%80%D1%82-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-crontab\" aria-hidden=\"true\"></a>Импорт через crontab</h3>\r\n<p>Добавьте в задания crontab следующую команду (пример для хостинга sweb)</p>\r\n<p><code>/usr/bin/php7.0 /home/l/login/site.com/artisan wizard:import --silence=1</code></p>\r\n<p><em>где /l - первая буква логина на хостинге, login - полный логин, site.com - папка с сайтом</em></p>\r\n<p>т.е. путь до интерпритатора, абсолютный путь до скрипта, -опция --silence=1</p>\r\n<h3><a id=\"user-content-Отслеживание-ошибок\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81-%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0-%D0%BF%D1%80%D0%B0%D0%B9%D1%81%D0%B0,-%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%B0%D0%B9%D1%81%D0%B0#%D0%9E%D1%82%D1%81%D0%BB%D0%B5%D0%B6%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BE%D1%88%D0%B8%D0%B1%D0%BE%D0%BA\" aria-hidden=\"true\"></a>Отслеживание ошибок</h3>\r\n<ul>\r\n<li><strong>Импорт через консоль.</strong>&nbsp;Если импорт прайса заканчивается ошибкой, то процесс импорта будет остановлен, а в вывод консоли добавлен stacktrace ошибки</li>\r\n<li><strong>Импорт через web-интерфейс.</strong>&nbsp;Если импорт прайса заканчивается ошибкой, то вы можете воспользоваться консолью разработчика Google Chrome и на вкладке Network увидеть XHR-запрос с ошибкой. Текст ошибки и вся информация по ней будет показана только в случае если на сайте включен debug-режим.</li>\r\n</ul>',	'protsess-importa-praysa-redaktirovanie-praysa',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:43:01',	'2017-10-23 21:43:16'),
(21,	'Вывод отзывов в модуле (ReviewsMiddleware)',	18,	'<p>Вывод модуля новых опубликованных отзывов.</p>',	'<h3>Подключение Middleware</h3>\r\n<p>Добавьте подключение через routes/<strong>web.php</strong>, либо подключите в секцию web в app/Http/<strong>Kernel.php</strong></p>\r\n<pre><code>Larrock\\ComponentReviews\\Middleware\\ReviewsMiddleware::class\r\n</code></pre>\r\n<p>Все данные для модуля отзывов в шаблоне доступны из ReviewsMiddleware Middleware через переменную&nbsp;<strong>$reviews</strong></p>\r\n<p><em>Вывод в шаблоне:</em></p>\r\n<pre><code>@if(isset($reviews))\r\n	@include(\'larrock::front.modules.reviews.list-comments\')\r\n@endif\r\n</code></pre>\r\n<p>или в виде слайдера:</p>\r\n<pre><code>@if(isset($reviews))\r\n	@include(\'larrock::front.modules.reviews.list-comments-slider\')\r\n@endif\r\n</code></pre>\r\n<h3><a id=\"user-content-Изменение-количества-выводимых-отзывов\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-%D0%BE%D1%82%D0%B7%D1%8B%D0%B2%D0%BE%D0%B2-%D0%B2-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5-%28ReviewsMiddleware%29#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B0-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B8%D0%BC%D1%8B%D1%85-%D0%BE%D1%82%D0%B7%D1%8B%D0%B2%D0%BE%D0%B2\" aria-hidden=\"true\"></a>Изменение количества выводимых отзывов</h3>\r\n<p>Создайте в config/<strong>larrock.php</strong>&nbsp;и измените значение&nbsp;<strong>take</strong></p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-s\"><span class=\"pl-pds\">\'</span>reviews<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>module<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">            <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>take<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">10</span></span>\r\n<span class=\"pl-s1\">        ]</span>\r\n<span class=\"pl-s1\">    ]</span></pre>\r\n</div>',	'vyvod-otzyvov-v-module-reviewsmiddleware',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:45:04',	'2017-10-23 21:45:33'),
(22,	'Методы компонентов',	20,	'<p>Основой любого пакета с расширением является файл Component.php из larrock-core.</p>\r\n<p>Все настройки и управляющая логика расширений наследуются от Component</p>',	'<h3><a id=\"user-content-Переменные-компонента-определяемые-программистом\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B-%28Components%29#%D0%9F%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0-%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D1%8F%D0%B5%D0%BC%D1%8B%D0%B5-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%81%D1%82%D0%BE%D0%BC\" aria-hidden=\"true\"></a>Переменные компонента определяемые программистом:</h3>\r\n<ul>\r\n<li>$name - название</li>\r\n<li>$title - название для людей</li>\r\n<li>$description - текст описания назначения</li>\r\n<li>$table - название таблицы в БД для компонента</li>\r\n<li>$rows - массив с полями данных</li>\r\n<li>$model - класс модели</li>\r\n<li>$active - указатель на активность (TRUE - по-умолчанию)</li>\r\n<li>$plugins_backend - список используемых плагинов в админке</li>\r\n<li>$plugins_front - список используемых плагинов во фронте</li>\r\n<li>$settings - кастомные настройки</li>\r\n<li>$searchable - указатель на то, что в компоненте возможен поиск</li>\r\n</ul>\r\n<h3><a id=\"user-content-Переменные-не-задаваемые-пользователем-формируются-методами\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B-%28Components%29#%D0%9F%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5-%D0%BD%D0%B5-%D0%B7%D0%B0%D0%B4%D0%B0%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5-%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%BC-%D1%84%D0%BE%D1%80%D0%BC%D0%B8%D1%80%D1%83%D1%8E%D1%82%D1%81%D1%8F-%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D0%B0%D0%BC%D0%B8\" aria-hidden=\"true\"></a>Переменные не задаваемые пользователем (формируются методами)</h3>\r\n<ul>\r\n<li>$tabs - доступные табы для вывода компонента при редактировании в админке</li>\r\n<li>$tabs_data - данные внутри конкретного таба</li>\r\n<li>$valid - правила валидации для данных компонента</li>\r\n</ul>\r\n<h2><a id=\"user-content-Методы-Хелперы\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B-%28Components%29#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4%D1%8B-%D0%A5%D0%B5%D0%BB%D0%BF%D0%B5%D1%80%D1%8B\" aria-hidden=\"true\"></a>Методы (Хелперы)</h2>\r\n<h3><a id=\"user-content-Формирование-настроек\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B-%28Components%29#%D0%A4%D0%BE%D1%80%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA\" aria-hidden=\"true\"></a>Формирование настроек:</h3>\r\n<ul>\r\n<li>addRows() - защищенный метод для добавления конфига полей</li>\r\n<li>addPositionAndActive() - добавление полей и логики \"Веса\" и \"Активности\" материала компонента</li>\r\n<li>isSearchable() - компонент обладает логикой поиска материалов</li>\r\n<li>addPlugins() - включение плагинов</li>\r\n<li>addPluginImages() - добавление плагина загрузки изображений</li>\r\n<li>addPluginFiles() - добавление плагина загрузки файлов</li>\r\n<li>addPluginSeo() - добавление плагина SEO</li>\r\n</ul>\r\n<h3><a id=\"user-content-Вспомогательные-методы\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B-%28Components%29#%D0%92%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D0%B3%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D1%8B\" aria-hidden=\"true\"></a>Вспомогательные методы</h3>\r\n<ul>\r\n<li>renderAdminMenu() - метод формирующий пункт меню компонента в админке</li>\r\n<li>createSitemap() - метод формирование ссылок компонента для карты сайта</li>\r\n</ul>\r\n<h3><a id=\"user-content-Получение-настроек-из-фасада-расширения\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B-%28Components%29#%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA-%D0%B8%D0%B7-%D1%84%D0%B0%D1%81%D0%B0%D0%B4%D0%B0-%D1%80%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D1%8F\" aria-hidden=\"true\"></a>Получение настроек из фасада расширения</h3>\r\n<ul>\r\n<li>getConfig() - получение сформированного конфига компонента расширения</li>\r\n<li>getName() - получение названия</li>\r\n<li>getTitle() - получение \"человеческого\" названия</li>\r\n<li>getTable() - получение названия таблицы компонента</li>\r\n<li>getModel() - \"создание\" модели компонента</li>\r\n<li>getModelName() - получение имени модели</li>\r\n<li>getRows() - поля компонента</li>\r\n<li>getValid() - массив с параметрами валидации полей</li>\r\n<li>addFillableUserRows($rows) - массив с fillable-полями модели компонента (используется в конструкторе модели), где $rows - заданные поля по-умолчанию. Результат: массив полей дополненный полями из конфига компонента</li>\r\n</ul>',	'metody-komponentov',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:54:47',	'2017-10-30 15:46:40'),
(23,	'Переназначение настроек компонентов (изменение Component и Model)',	20,	'<p>Конфигурацию любого компонента можно изменить (название, имя таблицы, используемые поля, используемую модель) или дополнить своими классами.</p>',	'<ol>\r\n<li>\r\n<p>Создайте файл&nbsp;<strong>config/larrock.php</strong>&nbsp;со следующим содержанием:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>components<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>краткое название компонента<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> Класс компонента</span>\r\n<span class=\"pl-s1\">    ],</span>\r\n\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>models<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">  <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>краткое название компонента<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> Класс модели компонента</span>\r\n<span class=\"pl-s1\">    ]</span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>\r\n</li>\r\n<li>\r\n<p>Создайте файл с новым конфигом компонента, например в папке app/Components, с наследованием от базового Components компонента:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">class</span> НазваниеКомпонента<span class=\"pl-c1\">Component</span> <span class=\"pl-k\">extends</span> <span class=\"pl-c1\">\\Larrock\\</span><span class=\"pl-c1\">Component</span>НазваниеКомпонента\\НазваниеКомпонента<span class=\"pl-c1\">Component</span> </span></pre>\r\n</div>\r\n</li>\r\n<li>\r\n<p>По аналогии можете создать класс Модели</p>\r\n<p>Переназначьте конструктор и добавьте свои изменения:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">public</span> <span class=\"pl-k\">function</span> <span class=\"pl-c1\">__construct</span>()</span>\r\n<span class=\"pl-s1\">{</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-k\">parent</span><span class=\"pl-k\">::</span>__construct();</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">//Ваши классы или переназначенные атрибуты</span></span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n</li>\r\n</ol>\r\n<h2><a id=\"user-content-Например-переназначение-конфига-компонента-larrockfeed\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%B5%D1%80%D0%B5%D0%BD%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2-%28%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-Component-%D0%B8-Model%29#%D0%9D%D0%B0%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0-larrockfeed\" aria-hidden=\"true\"></a>Например (переназначение конфига компонента LarrockFeed):</h2>\r\n<h3><a id=\"user-content-Добавим-в-компонент-feed-новое-поле-status\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%B5%D1%80%D0%B5%D0%BD%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2-%28%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-Component-%D0%B8-Model%29#%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D0%BC-%D0%B2-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82-feed-%D0%BD%D0%BE%D0%B2%D0%BE%D0%B5-%D0%BF%D0%BE%D0%BB%D0%B5-status\" aria-hidden=\"true\"></a>Добавим в компонент Feed новое поле status</h3>\r\n<ol>\r\n<li>\r\n<p>Добавляем в таблицу БД компонента feed новое поле status</p>\r\n<pre><code>ALTER TABLE `feed`\r\nADD `status` varchar(191) COLLATE \'utf8mb4_unicode_ci\' NOT NULL AFTER `active`;\r\n</code></pre>\r\n</li>\r\n<li>\r\n<p>Создаем&nbsp;<strong>app/Components/FeedComponent.php</strong></p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">namespace</span> <span class=\"pl-en\">App\\Components</span>;</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">use</span> <span class=\"pl-c1\">Larrock\\Core\\Helpers\\FormBuilder\\FormSelect</span>;</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">class</span> <span class=\"pl-en\">FeedComponent</span> <span class=\"pl-k\">extends</span> <span class=\"pl-c1\">\\Larrock\\ComponentFeed\\</span><span class=\"pl-e\">FeedComponent</span></span>\r\n<span class=\"pl-s1\">{</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">function</span> <span class=\"pl-c1\">__construct</span>()</span>\r\n<span class=\"pl-s1\">    {</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-k\">parent</span><span class=\"pl-k\">::</span>__construct();</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-smi\">$this</span><span class=\"pl-k\">-&gt;</span>addAdditionalRows();</span>\r\n<span class=\"pl-s1\">    }</span>\r\n\r\n<span class=\"pl-s1\">    <span class=\"pl-k\">protected</span> <span class=\"pl-k\">function</span> <span class=\"pl-en\">addAdditionalRows</span>()</span>\r\n<span class=\"pl-s1\">    {</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-smi\">$row</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-c1\">FormSelect</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>status<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Статус вакансии<span class=\"pl-pds\">\'</span></span>);</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-smi\">$this</span><span class=\"pl-k\">-&gt;</span><span class=\"pl-smi\">rows</span>[<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>status<span class=\"pl-pds\">\'</span></span>] <span class=\"pl-k\">=</span> <span class=\"pl-smi\">$row</span><span class=\"pl-k\">-&gt;</span>setOptions([<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Свободна<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Закрыта<span class=\"pl-pds\">\'</span></span>])<span class=\"pl-k\">-&gt;</span>setDefaultValue(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>Свободна<span class=\"pl-pds\">\'</span></span>)<span class=\"pl-k\">-&gt;</span>setFillable();</span>\r\n\r\n<span class=\"pl-s1\">        <span class=\"pl-k\">return</span> <span class=\"pl-smi\">$this</span>;</span>\r\n<span class=\"pl-s1\">    }</span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n<p>Примечание: Метод setFillable() обязателен, если вы хотите сделать автоматическое сохранение данных поля в таблицу БД компонента.</p>\r\n</li>\r\n<li>\r\n<p>Прописываем новый конфиг компонента в файле&nbsp;<strong>config/larrock.php</strong></p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">use</span> <span class=\"pl-c1\">App\\Components\\FeedComponent</span>;</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">use</span> <span class=\"pl-c1\">App\\Models\\Feed</span>;</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>components<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>feed<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">FeedComponent</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span></span>\r\n<span class=\"pl-s1\">    ],</span>\r\n    \r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>models<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> [</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>feed<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">Feed</span><span class=\"pl-k\">::</span><span class=\"pl-c1\">class</span></span>\r\n<span class=\"pl-s1\">    ]</span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>\r\n</li>\r\n</ol>',	'perenaznachenie-nastroek-komponentov-izmenenie-component-i-model',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:55:34',	'2017-10-23 21:55:59'),
(24,	'Переназначение контроллеров компонентов',	20,	'<p>Контроллер используемый любым компонентом можно изменить.</p>',	'<ol>\r\n<li>\r\n<p>Создайте файл с новым контроллером компонента в папке app/Http/Controllers (php artisan make:controller), с наследованием от базового контроллера компонента:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">use</span> Базовый контроллер;</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">class</span> ВашКонтроллер <span class=\"pl-k\">extends</span> БазовыйКонтроллерКомпонента</span>\r\n<span class=\"pl-s1\">{</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c\">//Новые или перезаписанные методы</span></span>\r\n<span class=\"pl-s1\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">function</span> <span class=\"pl-en\">index</span>()</span>\r\n<span class=\"pl-s1\">    {</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-k\">...</span></span>\r\n<span class=\"pl-s1\">    }</span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n</li>\r\n<li>\r\n<p>Пропишите роут к новому компоненту и его методу в файле&nbsp;<strong>/routes/web.php</strong></p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$middlewares</span> <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>web<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>GetSeo<span class=\"pl-pds\">\'</span></span>];</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">if</span>(<span class=\"pl-c1\">file_exists</span>(base_path()<span class=\"pl-k\">.</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/vendor/fanamurov/larrock-menu<span class=\"pl-pds\">\'</span></span>)){</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-smi\">$middlewares</span>[] <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>AddMenuFront<span class=\"pl-pds\">\'</span></span>;</span>\r\n<span class=\"pl-s1\">}</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">if</span>(<span class=\"pl-c1\">file_exists</span>(base_path()<span class=\"pl-k\">.</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/vendor/fanamurov/larrock-blocks<span class=\"pl-pds\">\'</span></span>)){</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-smi\">$middlewares</span>[] <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>AddBlocksTemplate<span class=\"pl-pds\">\'</span></span>;</span>\r\n<span class=\"pl-s1\">}</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">if</span>(<span class=\"pl-c1\">file_exists</span>(base_path()<span class=\"pl-k\">.</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/vendor/fanamurov/larrock-discount<span class=\"pl-pds\">\'</span></span>)){</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-smi\">$middlewares</span>[] <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>DiscountsShare<span class=\"pl-pds\">\'</span></span>;</span>\r\n<span class=\"pl-s1\">}</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-c1\">Route</span><span class=\"pl-k\">::</span>group([<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>middleware<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-smi\">$middlewares</span>], <span class=\"pl-k\">function</span>(){</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c1\">Route</span><span class=\"pl-k\">::</span>get(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>ВашКонтроллер@вашМетод<span class=\"pl-pds\">\'</span></span>);</span>\r\n<span class=\"pl-s1\">});</span>\r\n</pre>\r\n</div>\r\n</li>\r\n</ol>\r\n<h2><a id=\"user-content-Например-переназначение-контроллера-компонента-larrockcatalog\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%B5%D1%80%D0%B5%D0%BD%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80%D0%BE%D0%B2-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2#%D0%9D%D0%B0%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80%D0%B0-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%B0-larrockcatalog\" aria-hidden=\"true\"></a>Например (переназначение контроллера компонента LarrockCatalog):</h2>\r\n<ol>\r\n<li>\r\n<p>Создаем новый контроллер&nbsp;<strong>CatalogOverrideController</strong></p>\r\n<div class=\"highlight highlight-source-shell\">\r\n<pre>php artisan make:controller CatalogOverrideController</pre>\r\n</div>\r\n</li>\r\n<li>\r\n<p>Редактируем&nbsp;<strong>app/Http/Controllers/CatalogOverrideController.php</strong></p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">namespace</span> <span class=\"pl-en\">App\\Http\\Controllers</span>;</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">use</span> <span class=\"pl-c1\">Illuminate\\Http\\Request</span>;</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">use</span> <span class=\"pl-c1\">Larrock\\ComponentCatalog\\CatalogController</span>;</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">use</span> <span class=\"pl-c1\">Larrock\\ComponentCategory\\Facades\\LarrockCategory</span>;</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">class</span> <span class=\"pl-en\">CatalogOverrideController</span> <span class=\"pl-k\">extends</span> <span class=\"pl-e\">CatalogController</span></span>\r\n<span class=\"pl-s1\">{</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">function</span> <span class=\"pl-en\">getCategoryRoot</span>()</span>\r\n<span class=\"pl-s1\">    {</span>\r\n<span class=\"pl-s1\">        <span class=\"pl-c\">//Override code</span></span>\r\n<span class=\"pl-s1\">    }</span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n</li>\r\n<li>\r\n<p>Прописываем роут&nbsp;<strong>/routes/web.php</strong>:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$middlewares</span> <span class=\"pl-k\">=</span> [<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>web<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>GetSeo<span class=\"pl-pds\">\'</span></span>];</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">if</span>(<span class=\"pl-c1\">file_exists</span>(base_path()<span class=\"pl-k\">.</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/vendor/fanamurov/larrock-menu<span class=\"pl-pds\">\'</span></span>)){</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-smi\">$middlewares</span>[] <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>AddMenuFront<span class=\"pl-pds\">\'</span></span>;</span>\r\n<span class=\"pl-s1\">}</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">if</span>(<span class=\"pl-c1\">file_exists</span>(base_path()<span class=\"pl-k\">.</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/vendor/fanamurov/larrock-blocks<span class=\"pl-pds\">\'</span></span>)){</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-smi\">$middlewares</span>[] <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>AddBlocksTemplate<span class=\"pl-pds\">\'</span></span>;</span>\r\n<span class=\"pl-s1\">}</span>\r\n<span class=\"pl-s1\"><span class=\"pl-k\">if</span>(<span class=\"pl-c1\">file_exists</span>(base_path()<span class=\"pl-k\">.</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/vendor/fanamurov/larrock-discount<span class=\"pl-pds\">\'</span></span>)){</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-smi\">$middlewares</span>[] <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>DiscountsShare<span class=\"pl-pds\">\'</span></span>;</span>\r\n<span class=\"pl-s1\">}</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-c1\">Route</span><span class=\"pl-k\">::</span>group([<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>middleware<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-smi\">$middlewares</span>], <span class=\"pl-k\">function</span>(){</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-c1\">Route</span><span class=\"pl-k\">::</span>get(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/<span class=\"pl-pds\">\'</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>CatalogOverrideController@getCategoryRoot<span class=\"pl-pds\">\'</span></span>);</span>\r\n<span class=\"pl-s1\">});</span></pre>\r\n</div>\r\n</li>\r\n</ol>',	'perenaznachenie-kontrollerov-komponentov',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:56:07',	'2017-10-23 21:56:24'),
(25,	'Добавление панелей компонентов на Dashboard',	20,	'<p>Любой компонент можно вывести на главную страницу админки (dashboard). Метод можно использовать для вывода быстрых ссылок на создание новых материалов, вывода статистики или любых других данных.</p>',	'<h2>Вывод панели</h2>\r\n<ol>\r\n<li>\r\n<p>Создайте и опишите в компоненте (например в BlocksComponent.php) функцию toDashboard</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-k\">public</span> <span class=\"pl-k\">function</span> <span class=\"pl-en\">toDashboard</span>()</span>\r\n<span class=\"pl-s1\">{</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-k\">return</span> view(<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>larrock::admin.dashboard.blocks<span class=\"pl-pds\">\'</span></span>, [<span class=\"pl-s\"><span class=\"pl-pds\">\'</span>component<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">LarrockBlocks</span><span class=\"pl-k\">::</span>getConfig()]);</span>\r\n<span class=\"pl-s1\">}</span></pre>\r\n</div>\r\n</li>\r\n<li>\r\n<p>Создайте файл шаблона вывода панели (например: admin/dashboard/blocks.blade.php)</p>\r\n<pre><code>&lt;div id=\"dashboard-blocks\" class=\"dashboard-item uk-width-small-1-2 uk-width-medium-1-4\"&gt;\r\n    &lt;div class=\"uk-panel uk-alert\"&gt;\r\n        &lt;p class=\"uk-h3\"&gt;&lt;a href=\"/admin/{{ $component-&gt;name }}\"&gt;{{ $component-&gt;title }}&lt;/a&gt;&lt;/p&gt;\r\n        &lt;a href=\"/admin/blocks/create\" class=\"uk-button uk-button-primary\"&gt;Создать блок&lt;/a&gt;\r\n    &lt;/div&gt;\r\n&lt;/div&gt;\r\n</code></pre>\r\n</li>\r\n<li>\r\n<p>В файле конфига config/larrock-to-dashboard.php пропишите ссылку на подключение компонента:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-pse\">&lt;?php</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-smi\">$components</span> <span class=\"pl-k\">=</span> [];</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">if</span>(<span class=\"pl-c1\">file_exists</span>(base_path()<span class=\"pl-k\">.</span> <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>/vendor/fanamurov/larrock-blocks<span class=\"pl-pds\">\'</span></span>)){</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-smi\">$components</span>[] <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-c1\">\\Larrock\\ComponentBlocks\\</span><span class=\"pl-c1\">BlocksComponent</span>();</span>\r\n<span class=\"pl-s1\">}</span>\r\n\r\n<span class=\"pl-s1\"><span class=\"pl-k\">return</span> [</span>\r\n<span class=\"pl-s1\">    <span class=\"pl-s\"><span class=\"pl-pds\">\'</span>components<span class=\"pl-pds\">\'</span></span> <span class=\"pl-k\">=&gt;</span> <span class=\"pl-smi\">$components</span></span>\r\n<span class=\"pl-s1\">];</span></pre>\r\n</div>\r\n</li>\r\n</ol>\r\n<h2><a id=\"user-content-Изменение-вывода-панелей-по-умолчанию\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D0%B5%D0%B9-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2-%D0%BD%D0%B0-Dashboard#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0-%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D0%B5%D0%B9-%D0%BF%D0%BE-%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E\" aria-hidden=\"true\"></a>Изменение вывода панелей по-умолчанию</h2>\r\n<p>Вы всегда можете изменить шаблон вывода через редактирование самого шаблона /views/vendor/larrock/admin/dashboard/НазваниеКомпонента.blade.php. Либо полностью изменить поведение панели переназначив сам компонент.</p>',	'dobavlenie-paneley-komponentov-na-dashboard',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:56:34',	'2017-10-23 21:57:16'),
(26,	'Плагин addPluginImages (загрузка и вывод изображений)',	20,	'<p>Плагин для компонентов позволяющий реализовать загрузку изображений к материалам. Является составной частью ядра LarrockCMS.</p>',	'<h2>Подключение плагина к компоненту</h2>\r\n<p>В файле НазваниеКомпонентаComponent.php в секции __construct() добавить:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-smi\">$this</span><span class=\"pl-k\">-&gt;</span>addPluginImages();</span></pre>\r\n</div>\r\n<h2><a id=\"user-content-Функционал-плагина-addpluginimages\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD-addPluginImages-%28%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D0%B8-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9%29#%D0%A4%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%BE%D0%BD%D0%B0%D0%BB-%D0%BF%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D0%B0-addpluginimages\" aria-hidden=\"true\"></a>Функционал плагина addPluginImages</h2>\r\n<h3><a id=\"user-content-Административная-часть\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD-addPluginImages-%28%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D0%B8-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9%29#%D0%90%D0%B4%D0%BC%D0%B8%D0%BD%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D0%B0%D1%8F-%D1%87%D0%B0%D1%81%D1%82%D1%8C\" aria-hidden=\"true\"></a>Административная часть</h3>\r\n<ol>\r\n<li>В админке компонента в редактировании материалов появляется вкладка \"Фото\" с возможностью загрузки изображений. К каждому изображению можно присвоить группу для создания галереи, alt/краткое описание и задать вес.</li>\r\n<li>Все материалы позволяют задавать в редакторе тип вывода данных плагина на фронте в виде галерей через вставку \"шорткатов\" (кнопка в редакторе \"Вставить шаблон\")</li>\r\n</ol>\r\n<p>Доступные \"из коробки\" шаблоны:</p>\r\n<ol>\r\n<li>{<em>Фото[news]=ИмяГруппы</em>}. Вставка фото-галереи :: Новости (Одно большое, другие маленькие)</li>\r\n<li>{<em>Фото[newsDescription]=ИмяГруппы</em>}. Вставка фото-галереи :: Большие фото с описаниями</li>\r\n<li>{<em>Фото[blocks]=ИмяГруппы</em>}. Вставка фото-галереи :: Одинаковые блоки</li>\r\n<li>{<em>Фото[blocksBig]=ИмяГруппы</em>}. Вставка фото-галереи :: Большие фото</li>\r\n<li>{<em>Фото[sert]=ИмяГруппы</em>}. Вставка фото-галереи :: Сертификаты (небольшие фото с описаниями)</li>\r\n<li>{<em>Фото[customШиринаxВысота]=ИмяГруппы</em>}. Вставка фото-галереи :: Вывод одинаковыми блоками. Где&nbsp;<em>Ширина</em>x<em>Высота</em>&nbsp;- желаемый размер вывода изображений</li>\r\n</ol>\r\n<h3><a id=\"user-content-Вывод-данных-плагина-на-фронте\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD-addPluginImages-%28%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D0%B8-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9%29#%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85-%D0%BF%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D0%B0-%D0%BD%D0%B0-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B5\" aria-hidden=\"true\"></a>Вывод данных плагина на фронте</h3>\r\n<p>При выборе показа материалов в виде галереи \"шорткат\" в теле текста заменяется на шаблон из папки larrock::front.plugins.photoGallery.<strong>НазваниеШаблона</strong>.blade.php</p>\r\n<h3><a id=\"user-content-Изменение-и-добавление-шаблонов-галерей\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD-addPluginImages-%28%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D0%B8-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9%29#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D0%BE%D0%B2-%D0%B3%D0%B0%D0%BB%D0%B5%D1%80%D0%B5%D0%B9\" aria-hidden=\"true\"></a>Изменение и добавление шаблонов галерей</h3>\r\n<p>Все шаблоны для замены хранятся в папке larrock::front.plugins.photoGallery.<strong>НазваниеШаблона</strong>.blade.php. Вы можете изменить верстку блока по вашему желанию. Либо создать новый шаблон и вызывать его по \"шорткату\" {<em>Фото[ИмяШаблона]=ИмяГруппы</em>}</p>',	'plagin-addpluginimages-zagruzka-i-vyvod-izobrazheniy',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:57:27',	'2017-10-23 21:59:47'),
(27,	'Плагин addPluginFiles (загрузка и вывод файлов)',	20,	'<p>Плагин для компонентов позволяющий реализовать загрузку файлов к материалам. Является составной частью ядра LarrockCMS.</p>',	'<h2>Подключение плагина к компоненту</h2>\r\n<p>В файле НазваниеКомпонентаComponent.php в секции __construct() добавить:</p>\r\n<div class=\"highlight highlight-text-html-php\">\r\n<pre><span class=\"pl-s1\"><span class=\"pl-smi\">$this</span><span class=\"pl-k\">-&gt;</span>addPluginFiles();</span></pre>\r\n</div>\r\n<h2><a id=\"user-content-Функционал-плагина-addpluginfiles\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD-addPluginFiles-%28%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D0%B8-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%29#%D0%A4%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%BE%D0%BD%D0%B0%D0%BB-%D0%BF%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D0%B0-addpluginfiles\" aria-hidden=\"true\"></a>Функционал плагина addPluginFiles</h2>\r\n<h3><a id=\"user-content-Административная-часть\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD-addPluginFiles-%28%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D0%B8-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%29#%D0%90%D0%B4%D0%BC%D0%B8%D0%BD%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D0%B0%D1%8F-%D1%87%D0%B0%D1%81%D1%82%D1%8C\" aria-hidden=\"true\"></a>Административная часть</h3>\r\n<ol>\r\n<li>В админке компонента в редактировании материалов появляется вкладка \"Файлы\" с возможностью загрузки файлов. К каждому файлу можно присвоить группу для создания галереи, alt/краткое описание и задать вес.</li>\r\n<li>Все материалы позволяют задавать в редакторе тип вывода данных плагина на фронте в виде галерей через вставку \"шорткатов\" (кнопка в редакторе \"Вставить шаблон\")</li>\r\n</ol>\r\n<p>Доступные \"из коробки\" шаблоны:</p>\r\n<ol>\r\n<li>{<em>Файлы[default]=ИмяГруппы</em>}. Вставка прикрепленных к материалу файлов</li>\r\n<li>{<em>Файлы[directory]=ПутьКПапке</em>}. Вставка файлов из директории</li>\r\n</ol>\r\n<h3><a id=\"user-content-Вывод-данных-плагина-на-фронте\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD-addPluginFiles-%28%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D0%B8-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%29#%D0%92%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85-%D0%BF%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D0%B0-%D0%BD%D0%B0-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B5\" aria-hidden=\"true\"></a>Вывод данных плагина на фронте</h3>\r\n<p>При выборе показа материалов в виде галереи \"шорткат\" в теле текста заменяется на шаблон из папки larrock::front.plugins.fileGallery.<strong>НазваниеШаблона</strong>.blade.php</p>\r\n<h3><a id=\"user-content-Изменение-и-добавление-шаблонов-галерей\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/%D0%9F%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD-addPluginFiles-%28%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D0%B8-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%29#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D0%BE%D0%B2-%D0%B3%D0%B0%D0%BB%D0%B5%D1%80%D0%B5%D0%B9\" aria-hidden=\"true\"></a>Изменение и добавление шаблонов галерей</h3>\r\n<p>Все шаблоны для замены хранятся в папке larrock::front.plugins.fileGallery.<strong>НазваниеШаблона</strong>.blade.php. Вы можете изменить верстку блока по вашему желанию. Либо создать новый шаблон и вызывать его по \"шорткату\" {<em>Файлы[ИмяШаблона]=ИмяГруппы</em>}</p>',	'plagin-addpluginfiles-zagruzka-i-vyvod-faylov',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 21:57:45',	'2017-10-23 22:00:55'),
(28,	'Методы/типы полей',	21,	'',	'<ul>\r\n<li>FormInput</li>\r\n<li>FromTextarea</li>\r\n<li>FormCatalogItems</li>\r\n<li>FormCategory</li>\r\n<li>FormCheckbox</li>\r\n<li>FormDate</li>\r\n<li>FormHidden</li>\r\n<li>FormInput</li>\r\n<li>FormPassword</li>\r\n<li>FormSelect</li>\r\n<li>FormSelectKey</li>\r\n<li>FormTags</li>\r\n<li>FormTagsCreate</li>\r\n<li>FormTagsRole</li>\r\n</ul>',	'metodytipy-poley',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 22:14:49',	'2017-10-23 22:15:17'),
(29,	'FBElement класс конструктор для FormBuilder',	21,	'<p>Класс FBElement используется для определения настроек полей компонента внутри FormBuilder.</p>',	'<h3><a id=\"user-content-Базовые-методы\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/FBElement---%D0%BA%D0%BB%D0%B0%D1%81%D1%81-%D0%BA%D0%BE%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D0%BE%D1%80-%D0%B4%D0%BB%D1%8F-FormBuilder#%D0%91%D0%B0%D0%B7%D0%BE%D0%B2%D1%8B%D0%B5-%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D1%8B\" aria-hidden=\"true\"></a>Базовые методы:</h3>\r\n<p>Конструктор принимает на вход два параметра $name (название поля/название в БД) и $title (человеческое название)</p>\r\n<ul>\r\n<li><strong>setFillable() - поле добавляется в массив fillable модели компонента</strong></li>\r\n<li>setDefaultValue($default) - Использовать в качестве значения по-умолчанию. Можно передать в качестве параметра имя поля, тогда оно будет браться из БД</li>\r\n<li>setInTableAdmin() - Выводить поле в таблице(списке) контента в админке</li>\r\n<li>setInTableAdminAjaxEditable() - Выводить поле в таблице(списке) контента в админке и дать возможность редактировать через ajax</li>\r\n<li>setValid($valid) - добавить методы валидации</li>\r\n<li>isRequired() - сделать поле обязательным</li>\r\n<li>setCssClassGroup($class) - назначить css-класс для блока вывода поля в админке</li>\r\n<li>setCssClass($class) - назначить css-класс для поля в админке (например .not-editor для textarea для отключения редактора)</li>\r\n<li>setTab($tab_name, $tab_title) - в каком табе редактирования выводить поле</li>\r\n<li>setHelp($help) - текстовое пояснение для поля</li>\r\n<li>setConnect($model, $relation_name = NULL, $group_by = NULL) - установить связь поля с моделью и методом получения данных по модели, где $model - класс модели, $relation_name - имя связи из модели, $group_by - группировать значения по полю</li>\r\n<li>setWhereConnect($key, $value) - установить фильтрацию для получаемых по setConnect данным</li>\r\n<li>setAttached() - поле должно использовать метод attached</li>\r\n<li>setFrontPlace($place) - в каком блоке на фронте выводить поле</li>\r\n<li>setFiltered() - поле может фильтровать контент на фронте (используется в компоненте larrock-catalog)</li>\r\n<li>setSorted() - поле может сортировать контент на фронте (используется в компоненте larrock-catalog)</li>\r\n<li>setTemplate($template) - указать шаблон для вывода поля</li>\r\n<li>setUserSelect() - поле может быть заполнено пользователем (например для создания select-поля)</li>\r\n</ul>\r\n<h3><a id=\"user-content-Получение-сгенерированного-конфига-поля\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/FBElement---%D0%BA%D0%BB%D0%B0%D1%81%D1%81-%D0%BA%D0%BE%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D0%BE%D1%80-%D0%B4%D0%BB%D1%8F-FormBuilder#%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D1%81%D0%B3%D0%B5%D0%BD%D0%B5%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D0%B0-%D0%BF%D0%BE%D0%BB%D1%8F\" aria-hidden=\"true\"></a>Получение сгенерированного конфига поля</h3>\r\n<ul>\r\n<li>getElement()</li>\r\n</ul>\r\n<h3><a id=\"user-content-Методы-конкретных-полей\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/FBElement---%D0%BA%D0%BB%D0%B0%D1%81%D1%81-%D0%BA%D0%BE%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D0%BE%D1%80-%D0%B4%D0%BB%D1%8F-FormBuilder#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4%D1%8B-%D0%BA%D0%BE%D0%BD%D0%BA%D1%80%D0%B5%D1%82%D0%BD%D1%8B%D1%85-%D0%BF%D0%BE%D0%BB%D0%B5%D0%B9\" aria-hidden=\"true\"></a>Методы конкретных полей</h3>\r\n<p>Классы реализующие добавление полей наследуются и могут расширять базовый класс</p>\r\n<p><strong>FormTextarea, FormInput</strong></p>\r\n<ul>\r\n<li>setTypo() - включить возможность типографить текст внутри поля</li>\r\n</ul>\r\n<p><strong>FormTextarea</strong></p>\r\n<ul>\r\n<li>setNotEditor() - отключить редактор для редактирования поля</li>\r\n</ul>\r\n<p><strong>FormTags, FormTagsCreate, FormTagsRole, FormCatalogItems, FormCategory</strong></p>\r\n<ul>\r\n<li>setMaxItems($max = null) - установить максимально доступное для выбора/сохранения количество значений</li>\r\n</ul>\r\n<p><strong>FormCatalogItems</strong></p>\r\n<ul>\r\n<li>setOptions($options) - передача массива со значениями полей в виде ассоциативного массива в виде ключ:значение (имя значения поля для сохранения:выводимое значение для пользователя)</li>\r\n</ul>\r\n<p><strong>FromCheckbox</strong></p>\r\n<ul>\r\n<li>setChecked() - поле по-умолчанию нажато</li>\r\n</ul>\r\n<p><strong>FormSelect</strong></p>\r\n<ul>\r\n<li>setAllowCreate() - позволяет добавлять в качестве значений текст пользователя (кнопка \"создать\")</li>\r\n</ul>\r\n<p><strong>FormSelect, FormSelectKey</strong></p>\r\n<ul>\r\n<li>setOptions($options) - передача массива со значениями полей в виде ассоциативного массива в виде ключ:значение (имя значения поля для сохранения:выводимое значение для пользователя)</li>\r\n<li>setOptionsTitle($row) - какое значение из массива options показывать пользователям (например, сохраняем по id, а показываем title из материала по setConnect())</li>\r\n<li>setOptionsKey($row) - какое поле использовать в качестве value у select</li>\r\n</ul>',	'fbelement-klass-konstruktor-dlya-formbuilder',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 22:15:25',	'2017-10-23 22:16:17'),
(30,	'Метод addRows(). Создание полей компонента при помощи FormBuilder',	21,	'<p>Метод addRows() используется для определение состава и логики полей компонента в админке и на фронте. В качестве хелпера используется FormBuilder.</p>',	'<h3>Создание поля:</h3>\r\n<p>В конструкторе компонента:</p>\r\n<pre><code>$this-&gt;addRows()\r\n</code></pre>\r\n<p>Определяем метод:</p>\r\n<pre><code>protected function addRows()\r\n{\r\n    $row = new FormInput(\'имя поля в БД\', \'Название поля\');\r\n    $this-&gt;rows[\'имя поля в БД\'] = $row-&gt;методы FBElement настройки поля;\r\n\r\n    //other rows\r\n    return $this;\r\n}</code></pre>',	'metod-addrows-sozdanie-poley-komponenta-pri-pomoshchi-formbuilder',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 22:16:22',	'2017-10-23 22:16:50'),
(31,	'SaveAdminPluginsData Middleware (сохранение данных плагинов)',	20,	'<p>Middleware для работы функционала по сохранению данных плагинов у элементов компонентов в админке.</p>',	'<p>Местонахождение: /vendor/fanamurov/larrock-core/src/Middleware/SaveAdminPluginsData.php</p>\r\n<p>Использует класс Component и его метод savePluginsData</p>',	'saveadminpluginsdata-middleware-sokhranenie-dannykh-plaginov',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 22:17:44',	'2017-10-23 22:18:14'),
(32,	'JS — обработчики фронта',	22,	'',	'<h2>Общие</h2>\r\n<h3><a id=\"user-content-showmodalloading\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#showmodalloading\" aria-hidden=\"true\"></a>.showModalLoading</h3>\r\n<p>вызывать при клике на объекте с таким классом модальное окно с сообщением о загрузке</p>\r\n<h3><a id=\"user-content-fancybox\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#fancybox\" aria-hidden=\"true\"></a>.fancybox</h3>\r\n<p>включить fancybox</p>\r\n<h3><a id=\"user-content-inputnamedate-inputdate\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#inputnamedate-inputdate\" aria-hidden=\"true\"></a>input[name=date], input.date</h3>\r\n<p>включает плагин pickadate</p>\r\n<h3><a id=\"user-content-link_block\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#link_block\" aria-hidden=\"true\"></a>.link_block</h3>\r\n<p>Ищет внутри блока ссылку a href=\"\" и присваивает ее всему блоку&nbsp;<em>Пример:</em></p>\r\n<pre><code>&lt;div class=\"link_block\"&gt;&lt;a href=\"http://site.com\"&gt;&lt;/a&gt;&lt;/div&gt;\r\n</code></pre>\r\n<h3><a id=\"user-content-link_block_this\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#link_block_this\" aria-hidden=\"true\"></a>.link_block_this</h3>\r\n<p>Ищет в элементе аттрибут data-href и делает блок ссылкой&nbsp;<em>Пример:</em></p>\r\n<pre><code>&lt;div class=\"link_block_this\" data-href=\"http://site.com\"&gt;Text&lt;/div&gt;\r\n</code></pre>\r\n<h2><a id=\"user-content-larrockcatalog\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#larrockcatalog\" aria-hidden=\"true\"></a>LarrockCatalog</h2>\r\n<h3><a id=\"user-content-selectsearchcatalog\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#selectsearchcatalog\" aria-hidden=\"true\"></a>select#searchCatalog</h3>\r\n<p>обеспечивает работу модуля поиска по каталогу с автоподсказчиком</p>\r\n<h3><a id=\"user-content-change_option_ajaxnotuk-active\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#change_option_ajaxnotuk-active\" aria-hidden=\"true\"></a>.change_option_ajax:not(.uk-active)</h3>\r\n<p>Изменение параметров каталога (или любых других через контроллер Ajax) attr&nbsp;<em>data-option</em>&nbsp;- метод attr&nbsp;<em>data-value</em>&nbsp;- передаваемое значение attr&nbsp;<em>data-type</em>&nbsp;- другое передаваемое значение&nbsp;<em>Пример:</em></p>\r\n<pre><code>&lt;span class=\"change_option_ajax\" data-value=\"10\" data-type=\"cost\" data-option=\"sort\"&gt;Сортировка по цене&lt;/span&gt;\r\n</code></pre>\r\n<h2><a id=\"user-content-larrockcart\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#larrockcart\" aria-hidden=\"true\"></a>LarrockCart</h2>\r\n<h3><a id=\"user-content-add_to_cart-action_add_to_cart\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#add_to_cart-action_add_to_cart\" aria-hidden=\"true\"></a>.add_to_cart, .action_add_to_cart</h3>\r\n<p>Вызов модального окна для добавления товара в корзину attr&nbsp;<em>data-id</em>&nbsp;- ID товара каталога&nbsp;<em>Пример:</em></p>\r\n<pre><code>&lt;span class=\"add_to_cart\" data-id=\"10\"&gt;Добавить в корзину&lt;/span&gt;\r\n</code></pre>\r\n<h3><a id=\"user-content-add_to_cart_fast\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#add_to_cart_fast\" aria-hidden=\"true\"></a>.add_to_cart_fast</h3>\r\n<p>Добавление товара в корзину без всплывающего окна attr&nbsp;<em>data-id</em>&nbsp;- ID товара attr&nbsp;<em>data-qty</em>&nbsp;- количество добавляемого товара (опционально, по-умолчанию: 1)&nbsp;<em>Пример:</em></p>\r\n<pre><code>&lt;span class=\"add_to_cart_fast\" data-id=\"10\" data-qty=\"1\"&gt;Добавить в корзину&lt;/span&gt;\r\n</code></pre>\r\n<h3><a id=\"user-content-removecartitem\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#removecartitem\" aria-hidden=\"true\"></a>.removeCartItem</h3>\r\n<p>Удаление элемента корзины attr&nbsp;<em>data-rowid</em>&nbsp;- rowID элемента корзины&nbsp;<em>Пример:</em></p>\r\n<pre><code>&lt;button type=\"button\" class=\"removeCartItem\" data-rowid=\"{{ $row-&gt;rowId }}\"&gt;Удалить&lt;/button&gt;\r\n</code></pre>\r\n<h3><a id=\"user-content-editqty\" class=\"anchor\" href=\"https://github.com/Fanamurov/larrock-core/wiki/JS-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%B8-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B0#editqty\" aria-hidden=\"true\"></a>.editQty</h3>\r\n<p>Изменение количества товара в корзине в модальном окне attr&nbsp;<em>data-rowid</em>&nbsp;- rowID элемента корзины value&nbsp;<em>qty</em>&nbsp;- Нужное количество товара (input value)&nbsp;<em>Пример:</em></p>\r\n<pre><code>&lt;input type=\"text\" class=\"editQty\" value=\"1\" data-rowid=\"{{ $row-&gt;rowId }}\"&gt;</code></pre>',	'js-obrabotchiki-fronta',	'2017-10-24 00:00:00',	0,	1,	1,	'2017-10-23 22:18:50',	'2017-10-23 22:19:08'),
(33,	'Роуты (route)',	5,	'<p>Роуты компонента по-умолчанию.</p>',	'<p>Компонент LarrockPage имеет один встроенный роут, который отвечает за показ каждого материала.</p>\r\n<pre>Route::get(\'/page/{url}\', [<br />    \'as\' =&gt; \'page\', \'uses\' =&gt; \'Larrock\\ComponentPages\\PageController@getItem\'<br />]);</pre>',	'routy-route-639',	'2017-10-25 00:00:00',	0,	1,	1,	'2017-10-24 14:37:28',	'2017-10-24 14:41:32'),
(34,	'Роуты (route)',	7,	'<p>Роуты компонента по-умолчанию.</p>',	'<p>Компонент LarrockPage имеет целый ряд роутров, в том числе заимствованных из стандартных Laravel.</p>\r\n<pre>Route::post(\'register\', RegisterController::class .\'@register\');<br /><br />Route::post(\'logout\', LoginController::class .\'@logout\')-&gt;name(\'logout\');<br />Route::get(\'/logout\', LoginController::class .\'@logout\');<br /><br />// Password Reset Routes...<br />Route::get(\'password/reset\', ForgotPasswordController::class .\'@showLinkRequestForm\')-&gt;name(\'password.request\');<br />Route::post(\'password/email\', ForgotPasswordController::class .\'@sendResetLinkEmail\')-&gt;name(\'password.email\');<br />Route::get(\'password/reset/{token}\', ResetPasswordController::class .\'@showResetForm\')-&gt;name(\'password.reset\');<br />Route::post(\'password/reset\', ResetPasswordController::class .\'@reset\');<br /><br />Route::get(<br />    \'/socialite/{provider}\', [<br />        \'as\' =&gt; \'socialite.auth\',<br />        function ( $provider ) {<br />            return \\Socialite::driver( $provider )-&gt;redirect();<br />        }<br />    ]<br />);<br /><br />Route::get(\'/socialite/{provider}/callback\', [<br />    \'as\' =&gt; \'socialite\', \'uses\' =&gt; UserController::class .\'@socialite\'<br />]);<br /><br />Route::get(\'/login\', [<br />    \'as\' =&gt; \'user.index\', \'uses\' =&gt; UserController::class .\'@index\'<br />]);</pre>\r\n<pre>Route::get(\'/user\', [<br />    \'as\' =&gt; \'user.index\', \'uses\' =&gt; UserController::class .\'@index\'<br />]);</pre>\r\n<p>Роут личного кабинета:</p>\r\n<pre>Route::get(\'/user/cabinet\', [<br />    \'as\' =&gt; \'user.cabinet\', \'uses\' =&gt; UserController::class .\'@cabinet\'<br />]);<br />Route::post(\'/user/login\', [<br />    \'as\' =&gt; \'user.login\', \'uses\' =&gt; UserController::class .\'@authenticate\'<br />]);<br />Route::get(\'/user/logout\', [<br />    \'as\' =&gt; \'user.logout\', \'uses\' =&gt; UserController::class .\'@logout\'<br />]);</pre>\r\n<p>Роут редактирования личных данных пользователя:</p>\r\n<pre>Route::post(\'/user/edit\', [<br />    \'as\' =&gt; \'user.edit\', \'uses\' =&gt; UserController::class .\'@updateProfile\'<br />]);</pre>',	'routy-route-529',	'2017-10-25 00:00:00',	0,	1,	1,	'2017-10-24 14:41:51',	'2017-10-24 14:58:12'),
(35,	'Роуты (route)',	9,	'<p>Роуты компонента по-умолчанию.</p>',	'<p>Компонент LarrockContact имеет один встроенный роут, который отвечает за отправку данных форм.</p>\r\n<pre>Route::post(\'/forms/send\', [<br />    \'as\' =&gt; \'submit.form\', \'uses\' =&gt; ContactController::class .\'@send_form\'<br />]);</pre>',	'routy-route-402',	'2017-10-25 00:00:00',	0,	1,	1,	'2017-10-24 15:00:32',	'2017-10-24 15:01:35'),
(36,	'Роуты (route)',	12,	'<p>Роуты компонента по-умолчанию.</p>',	'<p>Роут списка главных разделов лент:</p>\r\n<pre>Route::get(\'/feed/index\', [<br />    \'as\' =&gt; \'feed.index\', \'uses\' =&gt; FeedController::class .\'@index\'<br />]);</pre>\r\n<p>Роут показа подразделов/материалов лент:</p>\r\n<pre>Route::get(\'/feed/{category?}/{subcategory?}/{subsubcategory?}/{subsubcategory2?}/{subsubcategory3?}\', [<br /> \'as\' =&gt; \'feed.show\', \'uses\' =&gt; FeedController::class .\'@show\'<br /> ]);</pre>\r\n<p><em>Для показа списка материалов раздела и конкретного раздела используется один роут. В случае, если {subcategory?} не будет найдено как отдельный материал в разделе, то будет произведен поиск по разделам.</em></p>',	'routy-route-802',	'2017-10-25 00:00:00',	0,	1,	1,	'2017-10-24 15:02:32',	'2017-10-24 15:07:14'),
(37,	'Роуты (route)',	14,	'<p>Роуты компонента по-умолчанию.</p>',	'<p>Редирект на главную страницу:</p>\r\n<pre>Route::get(\'/catalog\', function(){<br />    return Redirect::to(\'/\');<br />});</pre>\r\n<p>Разделы первого уровня:</p>\r\n<pre>Route::get(\'/root\', [<br />    \'as\' =&gt; \'catalog.root\', \'uses\' =&gt; CatalogController::class .\'@getCategoryRoot\'<br />]);</pre>\r\n<p>Все товары на одной странице:</p>\r\n<pre>Route::get(\'/catalog/all\', [<br />    \'as\' =&gt; \'catalog.all\', \'uses\' =&gt; CatalogController::class .\'@getAllTovars\'<br />]);</pre>\r\n<p>Метод getCategoryExpanded. Разделы каталога, показ товаров вложенных в выбранный раздел и его первых родителей:</p>\r\n<pre>Route::get(\'/catalog/{category}/{category2?}/{category3?}/{category4?}\', [<br />    \'as\' =&gt; \'catalog.category\', \'uses\' =&gt; CatalogController::class .\'@getCategoryExpanded\'<br />]);</pre>\r\n<p>Метод getCategory. Разделы каталога, показ товаров вложенных в выбранный раздел:</p>\r\n<pre>Route::get(\'/catalog/{category}/{category2?}/{category3?}/{category4?}\', [<br />    \'as\' =&gt; \'catalog.category\', \'uses\' =&gt; CatalogController::class .\'@getCategory\'<br />]);</pre>\r\n<p>Поиск по каталогу:</p>\r\n<pre>Route::any(\'/search/catalog/serp/{words?}\', [<br />    \'as\' =&gt; \'search.catalog\', \'uses\' =&gt; CatalogController::class .\'@searchResult\'<br />]);<br />Route::get(\'/search/catalog\', [<br />    \'as\' =&gt; \'search.catalog\', \'uses\' =&gt; CatalogController::class .\'@searchItem\'<br />]);</pre>\r\n<p>Изменение выводимого количества товаров на одной странице:</p>\r\n<pre>Route::post(\'/ajax/editPerPage\', [<br />    \'as\' =&gt; \'ajax.editPerPage\', \'uses\' =&gt; CatalogController::class .\'@editPerPage\'<br />]);</pre>\r\n<p>Изменение сортировки товаров:</p>\r\n<pre>Route::post(\'/ajax/sort\', [<br />    \'as\' =&gt; \'ajax.sort\', \'uses\' =&gt; CatalogController::class .\'@sort\'<br />]);</pre>\r\n<p>Изменение шаблона вывода товаров (карточки или таблица):</p>\r\n<pre>Route::post(\'/ajax/vid\', [<br />    \'as\' =&gt; \'ajax.vid\', \'uses\' =&gt; CatalogController::class .\'@vid\'<br />]);</pre>\r\n<p>Генерирование YML-карты:</p>\r\n<pre>Route::get(\'/yml.xml\', [<br />    \'as\' =&gt; \'catalog.yml\', \'uses\' =&gt; CatalogController::class .\'@YML\'<br />]);</pre>',	'routy-route-838',	'2017-10-25 00:00:00',	0,	1,	1,	'2017-10-24 15:07:44',	'2017-10-24 15:15:57'),
(38,	'Роуты (route)',	15,	'<p>Роуты компонента по-умолчанию.</p>',	'<p>Страница корзины товаров:</p>\r\n<pre>Route::get(\'/cart\', [<br />    \'as\' =&gt; \'cart.index\', \'uses\' =&gt; CartController::class .\'@getIndex\'<br />]);</pre>\r\n<p>Создание заказа с упрощенной формы:</p>\r\n<pre>Route::post(\'/cart/short\', [<br />    \'as\' =&gt; \'cart.sendOrder\', \'uses\' =&gt; CartController::class .\'@sendOrderShort\'<br />]);</pre>\r\n<p>Создание заказа полного цикла (компонент LarrockCart должен быть установлен):</p>\r\n<pre>Route::post(\'/cart/full\', [<br />    \'as\' =&gt; \'cart.sendOrderFull\', \'uses\' =&gt; CartController::class .\'@sendOrderFull\'<br />]);</pre>\r\n<p>Роуты успешного оформления заказа (используется для проверки оплаты внешним сервисом) и ошибки:</p>\r\n<pre>Route::get(\'/cart/success\', [<br />    \'as\' =&gt; \'cart.success\', \'uses\' =&gt; UserController::class .\'@cabinet\'<br />]);<br />Route::get(\'/cart/fail\', [<br />    \'as\' =&gt; \'cart.fail\', \'uses\' =&gt; UserController::class .\'@cabinet\'<br />]);</pre>\r\n<p>Оферта:</p>\r\n<pre>Route::get(\'/cart/oferta\', [<br />    \'as\' =&gt; \'cart.oferta\', \'uses\' =&gt; CartController::class .\'@oferta\'<br />]);</pre>\r\n<p>Удаление заказа из личного кабинета пользователя:</p>\r\n<pre>Route::post(\'/user/removeOrder/{id}\', [<br />    \'as\' =&gt; \'user.removeOrder\', \'uses\' =&gt; CartController::class .\'@removeOrder\'<br />]);</pre>\r\n<p>Добавление в корзину товаров:</p>\r\n<pre>Route::post(\'/ajax/cartAdd\', [<br />    \'as\' =&gt; \'ajax.cartAdd\', \'uses\' =&gt; CartController::class .\'@cartAdd\'<br />]);</pre>\r\n<p>Удаление из корзины товаров:</p>\r\n<pre>Route::post(\'/ajax/cartRemove\', [<br />    \'as\' =&gt; \'ajax.cartRemove\', \'uses\' =&gt; CartController::class .\'@cartRemove\'<br />]);</pre>\r\n<p>Изменение количества товара в корзине:</p>\r\n<pre>Route::post(\'/ajax/cartQty\', [<br />    \'as\' =&gt; \'ajax.cartQty\', \'uses\' =&gt; CartController::class .\'@cartQty\'<br />]);</pre>\r\n<p>Получение товара через ajax-запрос:</p>\r\n<pre>Route::any(\'/ajax/getTovar\', [<br />    \'as\' =&gt; \'ajax.getTovar\', \'uses\' =&gt; CatalogController::class .\'@getTovar\'<br />]);</pre>',	'routy-route-86',	'2017-10-25 00:00:00',	0,	1,	1,	'2017-10-24 15:16:17',	'2017-10-24 15:22:21'),
(39,	'Роуты (route)',	18,	'<p>Роуты компонента по-умолчанию.</p>',	'<p>Страница вывода всех отзывов/комментариев:</p>\r\n<pre>Route::get(\'/reviews\', [<br />    \'as\' =&gt; \'reviews.all\', \'uses\' =&gt; ReviewsController::class .\'@index\'<br />]);</pre>\r\n<p>Добавление нового отзыва/комментария:</p>\r\n<pre>Route::post(\'/reviews/post\', [<br />    \'as\' =&gt; \'reviews.post\', \'uses\' =&gt; ReviewsController::class .\'@post\'<br />]);</pre>',	'routy-route-710',	'2017-10-25 00:00:00',	0,	1,	1,	'2017-10-24 15:22:45',	'2017-10-24 15:24:10'),
(41,	'Модель (Model) Page',	5,	'<p>Методы модели</p>',	'<p><span class=\"uk-h2\">getFullUrlAttribute()</span></p>\r\n<p><em>Метод получения url материала&nbsp;и вывод в атрибуте full_url<br /></em></p>\r\n<pre class=\"language-php\"><code>    public function getFullUrlAttribute()\r\n    {\r\n        return \'/page/\'. $this-&gt;url;\r\n    }</code></pre>\r\n<p>&nbsp;</p>\r\n<p><span class=\"uk-h2\">getDescriptionRenderAttribute()</span></p>\r\n<p><em>Замена тегов плагинов на их данные и вывод в атрибуте description_render</em></p>\r\n<pre class=\"language-php\"><code>    public function getDescriptionRenderAttribute()\r\n    {\r\n        return \\Cache::remember(\'DescriptionRenderPage\'. $this-&gt;id, 1440, function(){\r\n            $renderPlugins = new RenderPlugins($this-&gt;description, $this);\r\n            $render = $renderPlugins-&gt;renderBlocks()-&gt;renderImageGallery()-&gt;renderFilesGallery();\r\n            return $render-&gt;rendered_html;\r\n        });\r\n    }</code></pre>\r\n<p>&nbsp;</p>\r\n<p>Так же в модели доступны все методы&nbsp;HasMediaTrait и&nbsp;SearchableTrait, GetSeo, GetFilesAndImages.</p>',	'model-model',	'2017-10-26 00:00:00',	0,	1,	1,	'2017-10-25 21:46:54',	'2017-10-30 21:28:04'),
(42,	'Model trait GetFilesAndImages',	23,	'<p>Трейт для моделей компонентов: добавления пресетов картинок по-умолчанию (110x110, 140x140), методов получения файлов через Medialibrary</p>',	'<p><span class=\"uk-h2\">Подключение трейта к модели компонента</span></p>\r\n<p><em>Задайте значение modelName (обычно это название таблицы в БД) и импортируйте трейт GetFilesAndImages. Пример из модели Feed:</em></p>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<pre class=\"language-php\"><code>	public function getImages()\r\n	{\r\n		return $this-&gt;hasMany(\'Spatie\\MediaLibrary\\Media\', \'model_id\', \'id\')-&gt;where([[\'model_type\', \'=\', LarrockPages::getModelName()], [\'collection_name\', \'=\', \'images\']])-&gt;orderBy(\'order_column\', \'DESC\');\r\n	}</code></pre>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<p>&nbsp;</p>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<p>&nbsp;</p>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<p><span class=\"uk-h2\">getFirstImage()</span></p>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<p><em>Метод получения одной картинки материала (наибольшей по \"весу\")<br /></em></p>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<pre class=\"language-php\"><code>	public function getFirstImage()\r\n	{\r\n		return $this-&gt;hasOne(\'Spatie\\MediaLibrary\\Media\', \'model_id\', \'id\')-&gt;where([[\'model_type\', \'=\', LarrockPages::getModelName()], [\'collection_name\', \'=\', \'images\']])-&gt;orderBy(\'order_column\', \'DESC\');\r\n	}</code></pre>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<p>&nbsp;</p>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<p><span class=\"uk-h2\">getFiles()</span></p>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<p><em>Метод получения загруженных через плагин файлов материала<br /></em></p>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<pre class=\"language-php\"><code>    public function getFiles()\r\n    {\r\n        return $this-&gt;hasMany(\'Spatie\\MediaLibrary\\Media\', \'model_id\', \'id\')-&gt;where([[\'model_type\', \'=\', LarrockPages::getModelName()], [\'collection_name\', \'=\', \'files\']])-&gt;orderBy(\'order_column\', \'DESC\');\r\n    }</code></pre>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<p>&nbsp;</p>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<p><span class=\"uk-h2\">getFirstImageAttribute()</span></p>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<p><em>Метод получения ссылки на \"главную\" картинку материала. В случае ее отсутствия выдается ссылка на заглушку.</em></p>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<pre class=\"language-php\"><code>    public function getFirstImageAttribute()\r\n    {\r\n        $value = Cache::remember(sha1(\'image_f_category\'. $this-&gt;id .\'_\'. $this-&gt;modelName), 1440, function() {\r\n            if($get_image = $this-&gt;getMedia(\'images\')-&gt;sortByDesc(\'order_column\')-&gt;first()){\r\n                return $get_image-&gt;getUrl();\r\n            }\r\n            return \'/_assets/_front/_images/empty_big.png\';\r\n        });\r\n        return $value;\r\n    }</code></pre>\r\n<pre class=\"language-php\"><code></code></pre>\r\n<p>&nbsp;</p>\r\n<pre class=\"language-php\"><code></code></pre>',	'trait-getfilesandimages',	'2017-10-27 00:00:00',	0,	1,	1,	'2017-10-26 17:36:11',	'2017-10-30 21:40:17'),
(44,	'Модель (Model) Blocks',	8,	'<p>Методы модели</p>',	'<p><span class=\"uk-h2\">getFullUrlAttribute()</span></p>\r\n<p><em>Метод получения url материала&nbsp;и вывод в атрибуте full_url<br /></em></p>\r\n<pre class=\"language-php\"><code>    public function getFullUrlAttribute()\r\n    {\r\n        return \'/blocks/\'. $this-&gt;url;\r\n    }</code></pre>\r\n<p>&nbsp;</p>\r\n<p><span class=\"uk-h2\">getDescriptionRenderAttribute()</span></p>\r\n<p><em>Замена тегов плагинов на их данные и вывод в атрибуте description_render</em></p>\r\n<pre class=\"language-php\"><code>    public function getDescriptionRenderAttribute()\r\n    {\r\n        return \\Cache::remember(\'DescriptionRenderBlocks\'. $this-&gt;id, 1440, function(){\r\n            $renderPlugins = new RenderPlugins($this-&gt;description, $this);\r\n            $render = $renderPlugins-&gt;renderBlocks()-&gt;renderImageGallery()-&gt;renderFilesGallery();\r\n            return $render-&gt;rendered_html;\r\n        });\r\n    }</code></pre>\r\n<p>&nbsp;</p>\r\n<p>Так же в модели доступны все методы&nbsp;HasMediaTrait и&nbsp;SearchableTrait, GetSeo, GetFilesAndImages.</p>',	'model-model-blocks',	'2017-10-30 00:00:00',	0,	1,	1,	'2017-10-29 21:16:26',	'2017-10-29 21:23:21'),
(45,	'Модель (Model) User',	7,	'<p>Методы модели</p>',	'<p><span class=\"uk-h2\">role()</span></p>\r\n<p><em>Метод получения ролей пользователя</em></p>\r\n<pre class=\"language-php\"><code>    public function role()\r\n    {\r\n        return $this-&gt;belongsToMany(config(\'larrock-roles.models.role\'), \'role_user\', \'user_id\', \'role_id\');\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">cart()</span></p>\r\n<p><em>Метод получения списка совершенных заказов на сайте через компонент LarrockCart</em></p>\r\n<pre class=\"language-php\"><code>    public function cart()\r\n    {\r\n        return $this-&gt;hasMany(LarrockCart::getModelName(), \'user\', \'id\')-&gt;orderBy(\'updated_at\', \'desc\');\r\n    }</code></pre>\r\n<p>Так же в модели доступны все методы&nbsp;HasMediaTrait и&nbsp;SearchableTrait, GetSeo, GetFilesAndImages.</p>',	'model-model-user',	'2017-10-30 00:00:00',	0,	1,	1,	'2017-10-29 21:19:05',	'2017-10-29 21:22:46'),
(46,	'Модель (Model) Category',	13,	'<p>Методы модели</p>',	'<p>&nbsp;<span class=\"uk-h2\">getGetParentSeoTitleAttribute()</span></p>\r\n<p><em>Метод получения seo-заголовка родительского раздела</em></p>\r\n<pre class=\"language-php\"><code>    public function getGetParentSeoTitleAttribute()\r\n    {\r\n        if($get_seo = Seo::whereSeoIdConnect($this-&gt;parent)-&gt;first()){\r\n            return $get_seo-&gt;seo_title;\r\n        }\r\n        if($get_parent = LarrockCategory::getModel()-&gt;whereId($this-&gt;parent)-&gt;first()){\r\n            if($get_seo = Seo::whereSeoUrlConnect($get_parent-&gt;url)-&gt;first()){\r\n                return $get_seo-&gt;seo_title;\r\n            }\r\n            return $get_parent-&gt;title;\r\n        }\r\n        return $this-&gt;title;\r\n    }</code></pre>\r\n<p>&nbsp;<span class=\"uk-h2\">getDescriptionCategoryOnLinkAttribute()</span></p>\r\n<p><em>Метод получения прикрепленного материала из LarrockFeed<br /></em></p>\r\n<pre class=\"language-php\"><code>    public function getDescriptionCategoryOnLinkAttribute()\r\n    {\r\n        if(config(\'larrock.catalog.DescriptionCatalogCategoryLink\')){\r\n            return LarrockFeed::getModel()-&gt;find($this-&gt;description_link);\r\n        }\r\n        return NULL;\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">get_child()</span></p>\r\n<p><em>Метод получения разделов-потомков</em></p>\r\n<pre class=\"language-php\"><code>	public function get_child()\r\n	{\r\n		return $this-&gt;hasMany(LarrockCategory::getModelName(), \'parent\', \'id\')\r\n            -&gt;orderBy(\'position\', \'DESC\')-&gt;orderBy(\'updated_at\', \'ASC\');\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">get_childActive()</span></p>\r\n<p><em>Метод получения опубликованных (активных) разделов-потомков</em></p>\r\n<pre class=\"language-php\"><code>	public function get_childActive()\r\n	{\r\n		return $this-&gt;hasMany(LarrockCategory::getModelName(), \'parent\', \'id\')\r\n            -&gt;whereActive(1)-&gt;orderBy(\'position\', \'DESC\')-&gt;orderBy(\'updated_at\', \'ASC\');\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">getParentTreeAttribute()</span></p>\r\n<p><em>Метод получения дерева разделов от текущего до корневого</em></p>\r\n<pre class=\"language-php\"><code>	public function getParentTreeAttribute()\r\n	{\r\n		$key = \'tree_category\'. $this-&gt;id;\r\n		$list = Cache::remember($key, 1440, function() {\r\n            $list[] = $this;\r\n            return $this-&gt;iterate_tree($this, $list);\r\n		});\r\n		return $list;\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">getParentTreeAttribute()</span></p>\r\n<p><em>Метод получения дерева опубликованных (активных) разделов от текущего до корневого</em></p>\r\n<pre class=\"language-php\"><code>    public function getParentTreeActiveAttribute()\r\n    {\r\n        $key = \'tree_category_active\'. $this-&gt;id;\r\n        $list = Cache::remember($key, 1440, function() {\r\n            $list[] = $this;\r\n            return $this-&gt;iterate_tree_active($this, $list);\r\n        });\r\n        return $list;\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">get_parent()</span></p>\r\n<p><em>Метод получения родительского раздела</em></p>\r\n<pre class=\"language-php\"><code>	public function get_parent()\r\n	{\r\n		return $this-&gt;hasOne(LarrockCategory::getModelName(), \'id\', \'parent\');\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">get_parentActive()</span></p>\r\n<p><em>Метод получения опубликованного родительского раздела</em></p>\r\n<pre class=\"language-php\"><code>    public function get_parentActive()\r\n    {\r\n        return $this-&gt;hasOne(LarrockCategory::getModelName(), \'id\', \'parent\')\r\n            -&gt;where(LarrockCategory::getTable(). \'active\', \'=\', 1);\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">getFullUrlAttribute()</span></p>\r\n<p><em>Метод получения url материала&nbsp;и вывод в атрибуте full_url</em></p>\r\n<pre class=\"language-php\"><code>	public function getFullUrlAttribute()\r\n	{\r\n        return Cache::remember(\'url_category\'. $this-&gt;id, 1440, function() {\r\n            $url = \'\';\r\n            if($this-&gt;component){\r\n                $url = \'/\'. $this-&gt;component;\r\n            }\r\n            foreach ($this-&gt;parent_tree as $category){\r\n                $url .= \'/\'. $category-&gt;url;\r\n            }\r\n            return $url;\r\n        });\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">getUserAttribute()</span></p>\r\n<p><em>Метод получения данных пользователя по id из поля user_id</em></p>\r\n<pre class=\"language-php\"><code>	public function getUserAttribute()\r\n	{\r\n		return LarrockUsers::getModel()-&gt;whereId($this-&gt;user_id)-&gt;first();\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">get_tovars()</span></p>\r\n<p><em>Метод получения товаров текущего раздела из LarrockCatalog</em></p>\r\n<pre class=\"language-php\"><code>	public function get_tovars()\r\n	{\r\n		return $this-&gt;belongsToMany(LarrockCatalog::getModelName(), \'category_catalog\', \'category_id\', \'catalog_id\')\r\n            -&gt;orderBy(\'position\', \'DESC\')-&gt;orderBy(\'updated_at\', \'ASC\');\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">get_tovarsActive()</span></p>\r\n<p><em>Метод получения опубликованных (активных) товаров текущего раздела из LarrockCatalog</em></p>\r\n<pre class=\"language-php\"><code>	public function get_tovarsActive()\r\n	{\r\n		return $this-&gt;belongsToMany(LarrockCatalog::getModelName(), \'category_catalog\', \'category_id\', \'catalog_id\')\r\n            -&gt;whereActive(1)-&gt;orderBy(\'position\', \'DESC\')-&gt;orderBy(\'cost\', \'DESC\');\r\n	}\r\n</code></pre>\r\n<p><span class=\"uk-h2\">get_tovarsCount()</span></p>\r\n<p><em>Метод получения количества товаров LarrockCatalog в разделе</em></p>\r\n<p>&nbsp;</p>\r\n<pre class=\"language-php\"><code>	public function get_tovarsCount()\r\n	{\r\n		return $this-&gt;belongsToMany(LarrockCatalog::getModelName(), \'category_catalog\', \'category_id\', \'catalog_id\')-&gt;count();\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">getShortWrapAttribute()</span></p>\r\n<p><em>Метод получения текста короткого описания обрезанного до 200 символов</em></p>\r\n<pre class=\"language-php\"><code>	public function getShortWrapAttribute()\r\n	{\r\n		return mb_strimwidth($this-&gt;short, 0, 200, \'...\');\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">get_feed()</span></p>\r\n<p><em>Метод получения материалов LarrockFeed текущего раздела</em></p>\r\n<pre class=\"language-php\"><code>	public function get_feed()\r\n	{\r\n		return $this-&gt;hasMany(LarrockFeed::getModelName(), \'category\', \'id\')-&gt;orderBy(\'position\', \'DESC\');\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">get_feedActive()</span></p>\r\n<p><em>Метод получения опубликованных (активных) материалов LarrockFeed текущего раздела</em></p>\r\n<pre class=\"language-php\"><code>	public function get_feedActive()\r\n	{\r\n		return $this-&gt;hasMany(LarrockFeed::getModelName(), \'category\', \'id\')-&gt;whereActive(1)-&gt;orderBy(\'position\', \'DESC\');\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">get_soputka()</span></p>\r\n<p><em>Метод получения списка прилинкованных разделов</em></p>\r\n<pre class=\"language-php\"><code>	public function get_soputka()\r\n	{\r\n		return $this-&gt;belongsToMany(LarrockCategory::getModelName(), \'category_link\', \'category_id\', \'category_id_link\')\r\n            -&gt;orderBy(\'position\', \'DESC\');\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">get_soputkaTovars()</span></p>\r\n<p><em>Метод получения списка опубликованных (активных) товаров LarrockCatalog из прилинкованных разделов</em></p>\r\n<pre class=\"language-php\"><code>	public function get_soputkaTovars()\r\n	{\r\n		$find_categories = $this-&gt;belongsToMany(LarrockCategory::getModelName(), \'category_link\', \'category_id\', \'category_id_link\')\r\n            -&gt;orderBy(\'position\', \'DESC\')-&gt;get([\'id\']);\r\n		$list_categories = [];\r\n		foreach($find_categories as $category){\r\n			$list_categories[] = $category-&gt;id;\r\n		}\r\n		return LarrockCatalog::getModel()-&gt;whereActive(1)-&gt;whereHas(\'category\', function ($q) use ($list_categories){\r\n			$q-&gt;whereIn(\'category.id\', $list_categories);\r\n		})-&gt;get();\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">get_discount()</span></p>\r\n<p><em>Метод получения скидки из LarrockDiscount прилинкованной к текущему разделу</em></p>\r\n<pre class=\"language-php\"><code>	public function get_discount()\r\n    {\r\n        return $this-&gt;hasOne(LarrockDiscount::getModelName(), \'id\', \'discount_id\');\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">getShortRenderAttribute()</span></p>\r\n<p><em>Замена тегов плагинов на их данные и вывод в атрибуте short_render</em></p>\r\n<pre class=\"language-php\"><code>    public function getShortRenderAttribute()\r\n    {\r\n        return \\Cache::remember(\'ShortRenderFeed\'. $this-&gt;id, 1440, function(){\r\n            $renderPlugins = new RenderPlugins($this-&gt;short, $this);\r\n            $render = $renderPlugins-&gt;renderBlocks()-&gt;renderImageGallery()-&gt;renderFilesGallery();\r\n            return $render-&gt;rendered_html;\r\n        });\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">getDescriptionRenderAttribute()</span></p>\r\n<p><em>Замена тегов плагинов на их данные и вывод в атрибуте description_render</em></p>\r\n<pre class=\"language-php\"><code>    public function getDescriptionRenderAttribute()\r\n    {\r\n        return \\Cache::remember(\'DescriptionRenderFeed\'. $this-&gt;id, 1440, function(){\r\n            $renderPlugins = new RenderPlugins($this-&gt;description, $this);\r\n            $render = $renderPlugins-&gt;renderBlocks()-&gt;renderImageGallery()-&gt;renderFilesGallery();\r\n            return $render-&gt;rendered_html;\r\n        });\r\n    }</code></pre>',	'model-model-category',	'2017-10-30 00:00:00',	0,	1,	1,	'2017-10-29 21:30:19',	'2017-10-29 21:52:49'),
(47,	'Модель (Model) Catalog',	14,	'<p>Методы модели</p>',	'<p><span class=\"uk-h2\">get_category()</span></p>\r\n<p><em>Метод получения списка разделов прикрепленных к товару каталога</em></p>\r\n<pre class=\"language-php\"><code>	public function get_category()\r\n    {\r\n        return $this-&gt;belongsToMany(LarrockCategory::getModelName(), \'category_catalog\', \'catalog_id\', \'category_id\');\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">get_categoryActive()</span></p>\r\n<p><em>Метод получения списка активных (опубликованных) разделов прикрепленных к товару каталога</em></p>\r\n<pre class=\"language-php\"><code>    public function getCategoryActive()\r\n    {\r\n        return $this-&gt;belongsToMany(LarrockCategory::getModelName(), \'category_catalog\', \'catalog_id\', \'category_id\')-&gt;where(\'category.active\', \'=\', 1);\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">getFullUrlAttribute()</span></p>\r\n<p><em>Метод получения url товара и вывод в атрибуте full_url</em></p>\r\n<pre class=\"language-php\"><code>    public function getFullUrlAttribute()\r\n    {\r\n        return Cache::remember(\'url_catalog\'. $this-&gt;id, 1440, function() {\r\n            $url = \'/catalog\';\r\n            foreach ($this-&gt;get_category()-&gt;first()-&gt;parent_tree as $category){\r\n                $url .= \'/\'. $category-&gt;url;\r\n            }\r\n            $url .= \'/\'. $this-&gt;url;\r\n            return $url;\r\n        });\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">getFullUrlCategoryAttribute()</span></p>\r\n<p><em>Метод получения url раздела товара и вывод в атрибуте full_url_category</em></p>\r\n<pre class=\"language-php\"><code>    public function getFullUrlCategoryAttribute()\r\n    {\r\n        if($get_category = $this-&gt;get_category-&gt;first()){\r\n            return $get_category-&gt;full_url;\r\n        }\r\n        return NULL;\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">getDescriptionItemOnLinkAttribute()</span></p>\r\n<p><em>Метод получения прикрепленного к товару описания из LarrockFeed</em></p>\r\n<p>&nbsp;</p>\r\n<pre class=\"language-php\"><code>    public function getDescriptionItemOnLinkAttribute()\r\n    {\r\n        if(config(\'larrock.catalog.DescriptionCatalogItemLink\')){\r\n            return LarrockFeed::getModel()-&gt;find($this-&gt;description_link);\r\n        }\r\n        return NULL;\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">getCutDescriptionAttribute()</span></p>\r\n<p><em>Метод получения краткого описания товара сокращенного до 150 символов</em></p>\r\n<pre class=\"language-php\"><code>    public function getCutDescriptionAttribute()\r\n    {\r\n        if( !empty($this-&gt;short)){\r\n            return str_limit(strip_tags($this-&gt;short), 150, \'...\');\r\n        }\r\n        return str_limit(strip_tags($this-&gt;description), 150, \'...далее\');\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">getCostDiscountAttribute()</span></p>\r\n<p><em>Метод получения цены товара с учетом применения скидки от LarrockDiscount</em></p>\r\n<pre class=\"language-php\"><code>    public function getCostDiscountAttribute()\r\n    {\r\n        $discountHelper = new DiscountHelper();\r\n        return $discountHelper-&gt;getCostDiscount($this);\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">get_param()</span></p>\r\n<p><em>Метод получения параметров товара</em></p>\r\n<pre class=\"language-php\"><code>    public function get_param()\r\n    {\r\n        return $this-&gt;belongsToMany(Param::class, \'option_param_link\', \'catalog_id\', \'param_id\');\r\n    }</code></pre>\r\n<p>Так же в модели доступны все методы&nbsp;HasMediaTrait и&nbsp;SearchableTrait, GetSeo, GetFilesAndImages.</p>',	'model-model-catalog',	'2017-10-31 00:00:00',	0,	1,	1,	'2017-10-30 14:56:46',	'2017-10-30 15:12:57'),
(48,	'Модель (Model) Cart',	15,	'<p>Методы модели</p>',	'<p><span class=\"uk-h2\">getItemsAttribute($value)</span></p>\r\n<p><em>Метод получения данных о приобретенных товарах</em></p>\r\n<pre class=\"language-php\"><code>	public function getItemsAttribute($value)\r\n	{\r\n		$items = json_decode($value);\r\n		if(is_array($items) || is_object($items)){\r\n			foreach($items as $item_key =&gt; $item_value){\r\n				$items-&gt;{$item_key}-&gt;catalog = LarrockCatalog::getModel()-&gt;whereId($item_value-&gt;id)-&gt;with([\'getImages\'])-&gt;first();\r\n			}\r\n			return $items;\r\n		}\r\n        return [];\r\n	}</code></pre>\r\n<p><span class=\"uk-h2\">get_user()</span></p>\r\n<p><em>Метод получения информации о покупателе в заказе</em></p>\r\n<pre class=\"language-php\"><code>	public function get_user()\r\n	{\r\n		return $this-&gt;hasOne(LarrockUsers::getModelName(), \'id\', \'user\');\r\n	}</code></pre>',	'model-model-cart',	'2017-10-31 00:00:00',	0,	1,	1,	'2017-10-30 15:05:22',	'2017-10-30 15:07:24'),
(49,	'Модель (Model) Discount',	16,	'<p>Методы модели</p>',	'<p><span class=\"uk-h2\">getTotalAfterApplyAttribute()</span></p>\r\n<p><em>Метод получения стоимости товаров в корзине с вычетом скидки в процентах или абсолютной величине</em></p>\r\n<pre class=\"language-php\"><code>    public function getTotalAfterApplyAttribute()\r\n    {\r\n        $total = (float)str_replace(\',\', \'\', \\Cart::instance(\'main\')-&gt;total());\r\n        if($this-&gt;percent &gt; 0){\r\n            return $total*(100-$this-&gt;percent)/100;\r\n        }\r\n        if($this-&gt;num &gt; 0){\r\n            return $total-$this-&gt;num;\r\n        }\r\n        return $total;\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">getProfitAfterApplyAttribute()</span></p>\r\n<p><em>Метод получения значения выгоды покупателя от скидок</em></p>\r\n<pre class=\"language-php\"><code>    public function getProfitAfterApplyAttribute()\r\n    {\r\n        $total = (float)str_replace(\',\', \'\', \\Cart::instance(\'main\')-&gt;total());\r\n        if($this-&gt;percent &gt; 0){\r\n            return $total - $total*(100-$this-&gt;percent)/100;\r\n        }\r\n        if($this-&gt;num &gt; 0){\r\n            return $this-&gt;num;\r\n        }\r\n        return 0;\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">get_category_discount()</span></p>\r\n<p><em>Метод получения разделов с назначенной скидкой</em></p>\r\n<pre class=\"language-php\"><code>    public function get_category_discount()\r\n    {\r\n        return $this-&gt;hasMany(Category::class, \'discount_id\', \'id\')-&gt;orderBy(\'position\', \'DESC\');\r\n    }</code></pre>',	'model-model-discount',	'2017-10-31 00:00:00',	0,	1,	1,	'2017-10-30 15:08:40',	'2017-10-30 15:12:20'),
(50,	'Модель (Model) Feed',	12,	'<p>Методы модели</p>',	'<p>&nbsp;<span class=\"uk-h2\">scopeCategoryInfo()</span></p>\r\n<p><em>Метод получения информации по разделу в котором находится материал (<strong>deprecated method</strong>)</em></p>\r\n<p>&nbsp;</p>\r\n<pre class=\"language-php\"><code>    public function scopeCategoryInfo()\r\n    {\r\n        return DB::table(LarrockFeed::getConfig()-&gt;table)\r\n            -&gt;leftJoin(LarrockCategory::getConfig()-&gt;table, LarrockFeed::getConfig()-&gt;table. \'.category\', \'=\', LarrockCategory::getConfig()-&gt;table. \'.id\')\r\n            -&gt;get();\r\n    }</code></pre>\r\n<p>&nbsp;<span class=\"uk-h2\">get_category()</span></p>\r\n<p><em>Метод получения раздела материала</em></p>\r\n<pre class=\"language-php\"><code>    public function get_category()\r\n    {\r\n        return $this-&gt;hasOne(LarrockCategory::getModelName(), \'id\', \'category\');\r\n    }</code></pre>\r\n<p>&nbsp;<span class=\"uk-h2\">get_categoryActive()</span></p>\r\n<p><em>Метод получения раздела (опубликованного) материала</em></p>\r\n<pre class=\"language-php\"><code>    public function get_categoryActive()\r\n    {\r\n        return $this-&gt;hasOne(LarrockCategory::getModelName(), \'id\', \'category\')-&gt;whereActive(\'1\');\r\n    }</code></pre>\r\n<p>&nbsp;<span class=\"uk-h2\">getFullUrlAttribute()</span></p>\r\n<p><em>Метод получения url материала&nbsp;и вывод в атрибуте full_url</em></p>\r\n<pre class=\"language-php\"><code>    public function getFullUrlAttribute()\r\n    {\r\n        return Cache::remember(\'url_feed\'. $this-&gt;id, 1440, function() {\r\n            $url = \'/feed\';\r\n            foreach ($this-&gt;get_category()-&gt;first()-&gt;parent_tree as $category){\r\n                $url .= \'/\'. $category-&gt;url;\r\n            }\r\n            $url .= \'/\'. $this-&gt;url;\r\n            return $url;\r\n        });\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">getShortRenderAttribute()</span></p>\r\n<p><em>Замена тегов плагинов на их данные и вывод в атрибуте short_render</em></p>\r\n<pre class=\"language-php\"><code>    public function getShortRenderAttribute()\r\n    {\r\n        return \\Cache::remember(\'ShortRenderFeed\'. $this-&gt;id, 1440, function(){\r\n            $renderPlugins = new RenderPlugins($this-&gt;short, $this);\r\n            $render = $renderPlugins-&gt;renderBlocks()-&gt;renderImageGallery()-&gt;renderFilesGallery();\r\n            return $render-&gt;rendered_html;\r\n        });\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">getDescriptionRenderAttribute()</span></p>\r\n<p><em>Замена тегов плагинов на их данные и вывод в атрибуте description_render</em></p>\r\n<pre class=\"language-php\"><code>    public function getDescriptionRenderAttribute()\r\n    {\r\n        return \\Cache::remember(\'DescriptionRenderFeed\'. $this-&gt;id, 1440, function(){\r\n            $renderPlugins = new RenderPlugins($this-&gt;description, $this);\r\n            $render = $renderPlugins-&gt;renderBlocks()-&gt;renderImageGallery()-&gt;renderFilesGallery();\r\n            return $render-&gt;rendered_html;\r\n        });\r\n    }</code></pre>\r\n<p>Так же в модели доступны все методы&nbsp;HasMediaTrait и&nbsp;SearchableTrait, GetSeo, GetFilesAndImages.</p>',	'model-model-feed',	'2017-10-31 00:00:00',	0,	1,	1,	'2017-10-30 21:16:45',	'2017-10-30 21:25:06'),
(51,	'Model trait GetSeo',	10,	'<p>Трейт подключаемый к модели компонента для обеспечения работы компонента LarrockAdminSeo.</p>',	'<p><span class=\"uk-h2\">Подключение трейта к модели компонента</span></p>\r\n<p><em>Задайте значение componentName (обычно это название таблицы в БД) и импортируйте трейт GetSeo. Пример из модели Feed:</em></p>\r\n<pre class=\"language-php\"><code>&lt;?php\r\n\r\nuse Larrock\\Core\\Traits\\GetSeo;\r\n\r\nclass Feed extends Model\r\n{\r\n    $this-&gt;componentName = \'feed\';\r\n    use GetSeo;\r\n}</code></pre>\r\n<p><span class=\"uk-h2\">Добавляемые трейтом методы</span></p>\r\n<p><span class=\"uk-h2\">get_seo()</span></p>\r\n<p><em>Метод получения SEO-данных материала</em></p>\r\n<pre class=\"language-php\"><code>    public function get_seo()\r\n    {\r\n        return $this-&gt;hasOne(Seo::class, \'seo_id_connect\', \'id\')-&gt;whereSeoTypeConnect($this-&gt;componentName);\r\n    }</code></pre>\r\n<p><span class=\"uk-h2\">getGetSeoTitleAttribute</span></p>\r\n<p><em>Метод получения title материала с учетом работы компонента LarrockAdminSeo и вывод в атрибуте get_seo_title</em></p>\r\n<pre class=\"language-php\"><code>    public function getGetSeoTitleAttribute()\r\n    {\r\n        if($get_seo = Seo::whereSeoUrlConnect($this-&gt;url)-&gt;whereSeoTypeConnect($this-&gt;componentName)-&gt;first()){\r\n            if($get_seo-&gt;seo_title){\r\n                return $get_seo-&gt;seo_title;\r\n            }\r\n        }\r\n        if($get_seo = Seo::whereSeoIdConnect($this-&gt;id)-&gt;whereSeoTypeConnect($this-&gt;componentName)-&gt;first()){\r\n            if($get_seo-&gt;seo_title){\r\n                return $get_seo-&gt;seo_title;\r\n            }\r\n        }\r\n        return $this-&gt;title;\r\n    }</code></pre>',	'model-trait-getseo',	'2017-10-31 00:00:00',	0,	1,	1,	'2017-10-30 21:25:54',	'2017-10-30 21:34:48');

DROP TABLE IF EXISTS `forms_log`;
CREATE TABLE `forms_log` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `form_id` int(11) DEFAULT NULL,
  `title` char(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `form_data` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `form_status` char(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'Новая',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `forms_log_form_id_index` (`form_id`),
  KEY `forms_log_title_index` (`title`),
  KEY `forms_log_form_status_index` (`form_status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `media`;
CREATE TABLE `media` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `model_id` int(10) unsigned NOT NULL,
  `model_type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `collection_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `file_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `mime_type` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `disk` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `size` int(10) unsigned NOT NULL,
  `manipulations` json NOT NULL,
  `custom_properties` json NOT NULL,
  `order_column` int(10) unsigned DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `media_model_id_model_type_index` (`model_id`,`model_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `menu`;
CREATE TABLE `menu` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` char(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` char(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'default',
  `parent` int(11) DEFAULT '0',
  `url` char(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `position` int(11) NOT NULL DEFAULT '0',
  `active` int(11) NOT NULL DEFAULT '1',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `menu` (`id`, `title`, `type`, `parent`, `url`, `position`, `active`, `created_at`, `updated_at`) VALUES
(1,	'Техническая документация',	'default',	NULL,	'/feed/tekhnicheskaya-dokumentatsiya',	0,	1,	'2017-10-25 18:53:44',	'2017-10-25 18:54:29'),
(2,	'Пользовательская документация',	'default',	NULL,	'/feed/polzovatelskaya-dokumentatsiya',	0,	1,	'2017-10-25 18:54:36',	'2017-10-25 18:54:48');

DROP TABLE IF EXISTS `migrations`;
CREATE TABLE `migrations` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `migration` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `batch` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `migrations` (`id`, `migration`, `batch`) VALUES
(1,	'2014_10_12_000000_create_users_table',	1),
(2,	'2014_10_12_100000_create_password_resets_table',	1),
(3,	'2015_01_15_105324_create_roles_table',	1),
(4,	'2015_01_15_114412_create_role_user_table',	1),
(5,	'2015_01_26_115212_create_permissions_table',	1),
(6,	'2015_01_26_115523_create_permission_role_table',	1),
(7,	'2015_02_09_132439_create_permission_user_table',	1),
(8,	'2017_10_13_005151_create_blocks_table',	1),
(9,	'2017_10_13_005151_create_config_table',	1),
(10,	'2017_10_13_005151_create_menu_table',	1),
(11,	'2017_10_13_005151_create_page_table',	1),
(12,	'2017_10_13_005151_create_seo_table',	1),
(13,	'2017_10_13_005151_update_users_table',	1),
(14,	'2017_10_23_022728_create_forms_log_table',	1),
(15,	'2017_10_24_045325_create_media_table',	1),
(16,	'2017_10_13_005151_create_category_table',	2),
(17,	'2017_10_13_005151_create_feed_table',	2),
(18,	'2017_10_13_005152_create_category_link_table',	2),
(19,	'2017_10_13_005153_add_foreign_keys_to_category_link_table',	2),
(20,	'2017_10_13_005153_add_foreign_keys_to_category_table',	2);

DROP TABLE IF EXISTS `page`;
CREATE TABLE `page` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` char(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `url` char(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `position` int(11) NOT NULL DEFAULT '0',
  `active` int(11) NOT NULL DEFAULT '1',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `page_url_unique` (`url`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `password_resets`;
CREATE TABLE `password_resets` (
  `email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `token` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  KEY `password_resets_email_index` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `permissions`;
CREATE TABLE `permissions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `slug` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `model` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `permissions_slug_unique` (`slug`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `permission_role`;
CREATE TABLE `permission_role` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `permission_id` int(10) unsigned NOT NULL,
  `role_id` int(10) unsigned NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `permission_role_permission_id_index` (`permission_id`),
  KEY `permission_role_role_id_index` (`role_id`),
  CONSTRAINT `permission_role_permission_id_foreign` FOREIGN KEY (`permission_id`) REFERENCES `permissions` (`id`) ON DELETE CASCADE,
  CONSTRAINT `permission_role_role_id_foreign` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `permission_user`;
CREATE TABLE `permission_user` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `permission_id` int(10) unsigned NOT NULL,
  `user_id` int(10) unsigned NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `permission_user_permission_id_index` (`permission_id`),
  KEY `permission_user_user_id_index` (`user_id`),
  CONSTRAINT `permission_user_permission_id_foreign` FOREIGN KEY (`permission_id`) REFERENCES `permissions` (`id`) ON DELETE CASCADE,
  CONSTRAINT `permission_user_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `roles`;
CREATE TABLE `roles` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `slug` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `level` int(11) NOT NULL DEFAULT '1',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `roles_slug_unique` (`slug`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `roles` (`id`, `name`, `slug`, `description`, `level`, `created_at`, `updated_at`) VALUES
(1,	'Admin',	'Админ',	NULL,	3,	NULL,	NULL),
(2,	'Moderator',	'Модератор',	NULL,	2,	NULL,	NULL),
(3,	'User',	'Пользователь',	NULL,	1,	NULL,	NULL);

DROP TABLE IF EXISTS `role_user`;
CREATE TABLE `role_user` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `role_id` int(10) unsigned NOT NULL,
  `user_id` int(10) unsigned NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `role_user_role_id_index` (`role_id`),
  KEY `role_user_user_id_index` (`user_id`),
  CONSTRAINT `role_user_role_id_foreign` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE CASCADE,
  CONSTRAINT `role_user_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `role_user` (`id`, `role_id`, `user_id`, `created_at`, `updated_at`) VALUES
(1,	1,	1,	'2017-10-23 19:33:56',	'2017-10-23 19:33:56');

DROP TABLE IF EXISTS `seo`;
CREATE TABLE `seo` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `seo_title` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `seo_description` text COLLATE utf8mb4_unicode_ci,
  `seo_keywords` text COLLATE utf8mb4_unicode_ci,
  `seo_id_connect` int(11) DEFAULT NULL,
  `seo_url_connect` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `seo_type_connect` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `password` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `remember_token` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `first_name` char(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `last_name` char(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `fio` char(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `address` char(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `tel` char(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `permissions` char(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `users_email_unique` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `users` (`id`, `name`, `email`, `password`, `remember_token`, `created_at`, `updated_at`, `first_name`, `last_name`, `fio`, `address`, `tel`, `permissions`) VALUES
(1,	'Admin',	'admin@larrock-cms.ru',	'$2y$10$qlIjdkRQXPBuQR5F0Lzs.uv42BGTVOHhPPI.YaDTgUfHTnpsRyHeu',	NULL,	'2017-10-23 19:33:56',	'2017-10-23 19:33:56',	'Admin',	'Khabarovsk',	'Admin Khabarovsk',	'',	'',	'');

-- 2017-10-31 07:43:23
